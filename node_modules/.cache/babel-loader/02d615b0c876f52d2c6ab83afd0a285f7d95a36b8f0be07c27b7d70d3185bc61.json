{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FindOneAndUpdateOperation = exports.FindOneAndReplaceOperation = exports.FindOneAndDeleteOperation = exports.FindAndModifyOperation = exports.ReturnDocument = void 0;\nconst responses_1 = require(\"../cmap/wire_protocol/responses\");\nconst error_1 = require(\"../error\");\nconst read_preference_1 = require(\"../read_preference\");\nconst sort_1 = require(\"../sort\");\nconst utils_1 = require(\"../utils\");\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\n/** @public */\nexports.ReturnDocument = Object.freeze({\n  BEFORE: 'before',\n  AFTER: 'after'\n});\nfunction configureFindAndModifyCmdBaseUpdateOpts(cmdBase, options) {\n  cmdBase.new = options.returnDocument === exports.ReturnDocument.AFTER;\n  cmdBase.upsert = options.upsert === true;\n  if (options.bypassDocumentValidation === true) {\n    cmdBase.bypassDocumentValidation = options.bypassDocumentValidation;\n  }\n  return cmdBase;\n}\n/** @internal */\nclass FindAndModifyOperation extends command_1.CommandOperation {\n  constructor(collection, query, options) {\n    super(collection, options);\n    this.SERVER_COMMAND_RESPONSE_TYPE = responses_1.MongoDBResponse;\n    this.options = options;\n    // force primary read preference\n    this.readPreference = read_preference_1.ReadPreference.primary;\n    this.collection = collection;\n    this.query = query;\n  }\n  get commandName() {\n    return 'findAndModify';\n  }\n  buildCommandDocument(connection, _session) {\n    const options = this.options;\n    const command = {\n      findAndModify: this.collection.collectionName,\n      query: this.query,\n      remove: false,\n      new: false,\n      upsert: false\n    };\n    options.includeResultMetadata ??= false;\n    const sort = (0, sort_1.formatSort)(options.sort);\n    if (sort) {\n      command.sort = sort;\n    }\n    if (options.projection) {\n      command.fields = options.projection;\n    }\n    if (options.maxTimeMS) {\n      command.maxTimeMS = options.maxTimeMS;\n    }\n    // Decorate the findAndModify command with the write Concern\n    if (options.writeConcern) {\n      command.writeConcern = options.writeConcern;\n    }\n    if (options.let) {\n      command.let = options.let;\n    }\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (options.comment !== undefined) {\n      command.comment = options.comment;\n    }\n    (0, utils_1.decorateWithCollation)(command, options);\n    if (options.hint) {\n      const unacknowledgedWrite = this.writeConcern?.w === 0;\n      if (unacknowledgedWrite && (0, utils_1.maxWireVersion)(connection) < 9) {\n        throw new error_1.MongoCompatibilityError('hint for the findAndModify command is only supported on MongoDB 4.4+');\n      }\n      command.hint = options.hint;\n    }\n    return command;\n  }\n  handleOk(response) {\n    const result = super.handleOk(response);\n    return this.options.includeResultMetadata ? result : result.value ?? null;\n  }\n}\nexports.FindAndModifyOperation = FindAndModifyOperation;\n/** @internal */\nclass FindOneAndDeleteOperation extends FindAndModifyOperation {\n  constructor(collection, filter, options) {\n    // Basic validation\n    if (filter == null || typeof filter !== 'object') {\n      throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n    super(collection, filter, options);\n  }\n  buildCommandDocument(connection, session) {\n    const document = super.buildCommandDocument(connection, session);\n    document.remove = true;\n    return document;\n  }\n}\nexports.FindOneAndDeleteOperation = FindOneAndDeleteOperation;\n/** @internal */\nclass FindOneAndReplaceOperation extends FindAndModifyOperation {\n  constructor(collection, filter, replacement, options) {\n    if (filter == null || typeof filter !== 'object') {\n      throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n    if (replacement == null || typeof replacement !== 'object') {\n      throw new error_1.MongoInvalidArgumentError('Argument \"replacement\" must be an object');\n    }\n    if ((0, utils_1.hasAtomicOperators)(replacement)) {\n      throw new error_1.MongoInvalidArgumentError('Replacement document must not contain atomic operators');\n    }\n    super(collection, filter, options);\n    this.replacement = replacement;\n  }\n  buildCommandDocument(connection, session) {\n    const document = super.buildCommandDocument(connection, session);\n    document.update = this.replacement;\n    configureFindAndModifyCmdBaseUpdateOpts(document, this.options);\n    return document;\n  }\n}\nexports.FindOneAndReplaceOperation = FindOneAndReplaceOperation;\n/** @internal */\nclass FindOneAndUpdateOperation extends FindAndModifyOperation {\n  constructor(collection, filter, update, options) {\n    if (filter == null || typeof filter !== 'object') {\n      throw new error_1.MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n    if (update == null || typeof update !== 'object') {\n      throw new error_1.MongoInvalidArgumentError('Argument \"update\" must be an object');\n    }\n    if (!(0, utils_1.hasAtomicOperators)(update, options)) {\n      throw new error_1.MongoInvalidArgumentError('Update document requires atomic operators');\n    }\n    super(collection, filter, options);\n    this.update = update;\n    this.options = options;\n  }\n  buildCommandDocument(connection, session) {\n    const document = super.buildCommandDocument(connection, session);\n    document.update = this.update;\n    configureFindAndModifyCmdBaseUpdateOpts(document, this.options);\n    if (this.options.arrayFilters) {\n      document.arrayFilters = this.options.arrayFilters;\n    }\n    return document;\n  }\n}\nexports.FindOneAndUpdateOperation = FindOneAndUpdateOperation;\n(0, operation_1.defineAspects)(FindAndModifyOperation, [operation_1.Aspect.WRITE_OPERATION, operation_1.Aspect.RETRYABLE, operation_1.Aspect.EXPLAINABLE, operation_1.Aspect.SUPPORTS_RAW_DATA]);","map":{"version":3,"names":["responses_1","require","error_1","read_preference_1","sort_1","utils_1","command_1","operation_1","exports","ReturnDocument","Object","freeze","BEFORE","AFTER","configureFindAndModifyCmdBaseUpdateOpts","cmdBase","options","new","returnDocument","upsert","bypassDocumentValidation","FindAndModifyOperation","CommandOperation","constructor","collection","query","SERVER_COMMAND_RESPONSE_TYPE","MongoDBResponse","readPreference","ReadPreference","primary","commandName","buildCommandDocument","connection","_session","command","findAndModify","collectionName","remove","includeResultMetadata","sort","formatSort","projection","fields","maxTimeMS","writeConcern","let","comment","undefined","decorateWithCollation","hint","unacknowledgedWrite","w","maxWireVersion","MongoCompatibilityError","handleOk","response","result","value","FindOneAndDeleteOperation","filter","MongoInvalidArgumentError","session","document","FindOneAndReplaceOperation","replacement","hasAtomicOperators","update","FindOneAndUpdateOperation","arrayFilters","defineAspects","Aspect","WRITE_OPERATION","RETRYABLE","EXPLAINABLE","SUPPORTS_RAW_DATA"],"sources":["C:\\DEVC\\node_modules\\mongodb\\src\\operations\\find_and_modify.ts"],"sourcesContent":["import { type Connection } from '..';\nimport type { Document } from '../bson';\nimport { MongoDBResponse } from '../cmap/wire_protocol/responses';\nimport type { Collection } from '../collection';\nimport { MongoCompatibilityError, MongoInvalidArgumentError } from '../error';\nimport { ReadPreference } from '../read_preference';\nimport type { ClientSession } from '../sessions';\nimport { formatSort, type Sort, type SortForCmd } from '../sort';\nimport { decorateWithCollation, hasAtomicOperators, maxWireVersion } from '../utils';\nimport { type WriteConcern, type WriteConcernSettings } from '../write_concern';\nimport { CommandOperation, type CommandOperationOptions } from './command';\nimport { Aspect, defineAspects } from './operation';\n\n/** @public */\nexport const ReturnDocument = Object.freeze({\n  BEFORE: 'before',\n  AFTER: 'after'\n} as const);\n\n/** @public */\nexport type ReturnDocument = (typeof ReturnDocument)[keyof typeof ReturnDocument];\n\n/** @public */\nexport interface FindOneAndDeleteOptions extends CommandOperationOptions {\n  /** An optional hint for query optimization. See the {@link https://www.mongodb.com/docs/manual/reference/command/update/#update-command-hint|update command} reference for more information.*/\n  hint?: Document;\n  /** Limits the fields to return for all matching documents. */\n  projection?: Document;\n  /** Determines which document the operation modifies if the query selects multiple documents. */\n  sort?: Sort;\n  /** Map of parameter names and values that can be accessed using $$var (requires MongoDB 5.0). */\n  let?: Document;\n  /**\n   * Return the ModifyResult instead of the modified document. Defaults to false\n   */\n  includeResultMetadata?: boolean;\n}\n\n/** @public */\nexport interface FindOneAndReplaceOptions extends CommandOperationOptions {\n  /** Allow driver to bypass schema validation. */\n  bypassDocumentValidation?: boolean;\n  /** An optional hint for query optimization. See the {@link https://www.mongodb.com/docs/manual/reference/command/update/#update-command-hint|update command} reference for more information.*/\n  hint?: Document;\n  /** Limits the fields to return for all matching documents. */\n  projection?: Document;\n  /** When set to 'after', returns the updated document rather than the original. The default is 'before'.  */\n  returnDocument?: ReturnDocument;\n  /** Determines which document the operation modifies if the query selects multiple documents. */\n  sort?: Sort;\n  /** Upsert the document if it does not exist. */\n  upsert?: boolean;\n  /** Map of parameter names and values that can be accessed using $$var (requires MongoDB 5.0). */\n  let?: Document;\n  /**\n   * Return the ModifyResult instead of the modified document. Defaults to false\n   */\n  includeResultMetadata?: boolean;\n}\n\n/** @public */\nexport interface FindOneAndUpdateOptions extends CommandOperationOptions {\n  /** Optional list of array filters referenced in filtered positional operators */\n  arrayFilters?: Document[];\n  /** Allow driver to bypass schema validation. */\n  bypassDocumentValidation?: boolean;\n  /** An optional hint for query optimization. See the {@link https://www.mongodb.com/docs/manual/reference/command/update/#update-command-hint|update command} reference for more information.*/\n  hint?: Document;\n  /** Limits the fields to return for all matching documents. */\n  projection?: Document;\n  /** When set to 'after', returns the updated document rather than the original. The default is 'before'.  */\n  returnDocument?: ReturnDocument;\n  /** Determines which document the operation modifies if the query selects multiple documents. */\n  sort?: Sort;\n  /** Upsert the document if it does not exist. */\n  upsert?: boolean;\n  /** Map of parameter names and values that can be accessed using $$var (requires MongoDB 5.0). */\n  let?: Document;\n  /**\n   * Return the ModifyResult instead of the modified document. Defaults to false\n   */\n  includeResultMetadata?: boolean;\n}\n\n/** @internal */\ninterface FindAndModifyCmdBase {\n  remove: boolean;\n  new: boolean;\n  upsert: boolean;\n  update?: Document;\n  sort?: SortForCmd;\n  fields?: Document;\n  bypassDocumentValidation?: boolean;\n  arrayFilters?: Document[];\n  maxTimeMS?: number;\n  let?: Document;\n  writeConcern?: WriteConcern | WriteConcernSettings;\n  /**\n   * Comment to apply to the operation.\n   *\n   * In server versions pre-4.4, 'comment' must be string.  A server\n   * error will be thrown if any other type is provided.\n   *\n   * In server versions 4.4 and above, 'comment' can be any valid BSON type.\n   */\n  comment?: unknown;\n}\n\nfunction configureFindAndModifyCmdBaseUpdateOpts(\n  cmdBase: FindAndModifyCmdBase,\n  options: FindOneAndReplaceOptions | FindOneAndUpdateOptions\n): FindAndModifyCmdBase {\n  cmdBase.new = options.returnDocument === ReturnDocument.AFTER;\n  cmdBase.upsert = options.upsert === true;\n\n  if (options.bypassDocumentValidation === true) {\n    cmdBase.bypassDocumentValidation = options.bypassDocumentValidation;\n  }\n  return cmdBase;\n}\n\n/** @internal */\nexport class FindAndModifyOperation extends CommandOperation<Document> {\n  override SERVER_COMMAND_RESPONSE_TYPE = MongoDBResponse;\n  override options: FindOneAndReplaceOptions | FindOneAndUpdateOptions | FindOneAndDeleteOptions;\n  collection: Collection;\n  query: Document;\n  doc?: Document;\n\n  constructor(\n    collection: Collection,\n    query: Document,\n    options: FindOneAndReplaceOptions | FindOneAndUpdateOptions | FindOneAndDeleteOptions\n  ) {\n    super(collection, options);\n    this.options = options;\n    // force primary read preference\n    this.readPreference = ReadPreference.primary;\n\n    this.collection = collection;\n    this.query = query;\n  }\n\n  override get commandName() {\n    return 'findAndModify' as const;\n  }\n\n  override buildCommandDocument(\n    connection: Connection,\n    _session?: ClientSession\n  ): Document & FindAndModifyCmdBase {\n    const options = this.options;\n    const command: Document & FindAndModifyCmdBase = {\n      findAndModify: this.collection.collectionName,\n      query: this.query,\n      remove: false,\n      new: false,\n      upsert: false\n    };\n\n    options.includeResultMetadata ??= false;\n\n    const sort = formatSort(options.sort);\n    if (sort) {\n      command.sort = sort;\n    }\n\n    if (options.projection) {\n      command.fields = options.projection;\n    }\n\n    if (options.maxTimeMS) {\n      command.maxTimeMS = options.maxTimeMS;\n    }\n\n    // Decorate the findAndModify command with the write Concern\n    if (options.writeConcern) {\n      command.writeConcern = options.writeConcern;\n    }\n\n    if (options.let) {\n      command.let = options.let;\n    }\n\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (options.comment !== undefined) {\n      command.comment = options.comment;\n    }\n\n    decorateWithCollation(command, options);\n\n    if (options.hint) {\n      const unacknowledgedWrite = this.writeConcern?.w === 0;\n      if (unacknowledgedWrite && maxWireVersion(connection) < 9) {\n        throw new MongoCompatibilityError(\n          'hint for the findAndModify command is only supported on MongoDB 4.4+'\n        );\n      }\n\n      command.hint = options.hint;\n    }\n\n    return command;\n  }\n\n  override handleOk(response: InstanceType<typeof this.SERVER_COMMAND_RESPONSE_TYPE>): Document {\n    const result = super.handleOk(response);\n    return this.options.includeResultMetadata ? result : (result.value ?? null);\n  }\n}\n\n/** @internal */\nexport class FindOneAndDeleteOperation extends FindAndModifyOperation {\n  constructor(collection: Collection, filter: Document, options: FindOneAndDeleteOptions) {\n    // Basic validation\n    if (filter == null || typeof filter !== 'object') {\n      throw new MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n\n    super(collection, filter, options);\n  }\n\n  override buildCommandDocument(\n    connection: Connection,\n    session?: ClientSession\n  ): Document & FindAndModifyCmdBase {\n    const document = super.buildCommandDocument(connection, session);\n    document.remove = true;\n    return document;\n  }\n}\n\n/** @internal */\nexport class FindOneAndReplaceOperation extends FindAndModifyOperation {\n  private replacement: Document;\n  constructor(\n    collection: Collection,\n    filter: Document,\n    replacement: Document,\n    options: FindOneAndReplaceOptions\n  ) {\n    if (filter == null || typeof filter !== 'object') {\n      throw new MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n\n    if (replacement == null || typeof replacement !== 'object') {\n      throw new MongoInvalidArgumentError('Argument \"replacement\" must be an object');\n    }\n\n    if (hasAtomicOperators(replacement)) {\n      throw new MongoInvalidArgumentError('Replacement document must not contain atomic operators');\n    }\n\n    super(collection, filter, options);\n    this.replacement = replacement;\n  }\n\n  override buildCommandDocument(\n    connection: Connection,\n    session?: ClientSession\n  ): Document & FindAndModifyCmdBase {\n    const document = super.buildCommandDocument(connection, session);\n    document.update = this.replacement;\n    configureFindAndModifyCmdBaseUpdateOpts(document, this.options);\n    return document;\n  }\n}\n\n/** @internal */\nexport class FindOneAndUpdateOperation extends FindAndModifyOperation {\n  override options: FindOneAndUpdateOptions;\n\n  private update: Document;\n  constructor(\n    collection: Collection,\n    filter: Document,\n    update: Document,\n    options: FindOneAndUpdateOptions\n  ) {\n    if (filter == null || typeof filter !== 'object') {\n      throw new MongoInvalidArgumentError('Argument \"filter\" must be an object');\n    }\n\n    if (update == null || typeof update !== 'object') {\n      throw new MongoInvalidArgumentError('Argument \"update\" must be an object');\n    }\n\n    if (!hasAtomicOperators(update, options)) {\n      throw new MongoInvalidArgumentError('Update document requires atomic operators');\n    }\n\n    super(collection, filter, options);\n    this.update = update;\n    this.options = options;\n  }\n\n  override buildCommandDocument(\n    connection: Connection,\n    session?: ClientSession\n  ): Document & FindAndModifyCmdBase {\n    const document = super.buildCommandDocument(connection, session);\n    document.update = this.update;\n    configureFindAndModifyCmdBaseUpdateOpts(document, this.options);\n\n    if (this.options.arrayFilters) {\n      document.arrayFilters = this.options.arrayFilters;\n    }\n\n    return document;\n  }\n}\n\ndefineAspects(FindAndModifyOperation, [\n  Aspect.WRITE_OPERATION,\n  Aspect.RETRYABLE,\n  Aspect.EXPLAINABLE,\n  Aspect.SUPPORTS_RAW_DATA\n]);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}