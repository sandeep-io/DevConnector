{"ast":null,"code":"'use strict';\n\n/*!\n * ignore\n */\nmodule.exports = function validateBeforeSave(schema) {\n  const unshift = true;\n  schema.pre('save', false, async function validateBeforeSave(options) {\n    // Nested docs have their own presave\n    if (this.$isSubdocument) {\n      return;\n    }\n    const hasValidateBeforeSaveOption = options && typeof options === 'object' && 'validateBeforeSave' in options;\n    let shouldValidate;\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    }\n\n    // Validate\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options && typeof options === 'object' && 'validateModifiedOnly' in options;\n      const validateOptions = hasValidateModifiedOnlyOption ? {\n        validateModifiedOnly: options.validateModifiedOnly\n      } : null;\n      await this.$validate(validateOptions).then(() => {\n        this.$op = 'save';\n      });\n    }\n  }, null, unshift);\n};","map":{"version":3,"names":["module","exports","validateBeforeSave","schema","unshift","pre","options","$isSubdocument","hasValidateBeforeSaveOption","shouldValidate","$__schema","hasValidateModifiedOnlyOption","validateOptions","validateModifiedOnly","$validate","then","$op"],"sources":["C:/DEVC/node_modules/mongoose/lib/plugins/validateBeforeSave.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function validateBeforeSave(schema) {\n  const unshift = true;\n  schema.pre('save', false, async function validateBeforeSave(options) {\n    // Nested docs have their own presave\n    if (this.$isSubdocument) {\n      return;\n    }\n\n    const hasValidateBeforeSaveOption = options &&\n        (typeof options === 'object') &&\n        ('validateBeforeSave' in options);\n\n    let shouldValidate;\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    }\n\n    // Validate\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options &&\n          (typeof options === 'object') &&\n          ('validateModifiedOnly' in options);\n      const validateOptions = hasValidateModifiedOnlyOption ?\n        { validateModifiedOnly: options.validateModifiedOnly } :\n        null;\n      await this.$validate(validateOptions).then(\n        () => {\n          this.$op = 'save';\n        }\n      );\n    }\n  }, null, unshift);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAG,SAASC,kBAAkBA,CAACC,MAAM,EAAE;EACnD,MAAMC,OAAO,GAAG,IAAI;EACpBD,MAAM,CAACE,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,eAAeH,kBAAkBA,CAACI,OAAO,EAAE;IACnE;IACA,IAAI,IAAI,CAACC,cAAc,EAAE;MACvB;IACF;IAEA,MAAMC,2BAA2B,GAAGF,OAAO,IACtC,OAAOA,OAAO,KAAK,QAAS,IAC5B,oBAAoB,IAAIA,OAAQ;IAErC,IAAIG,cAAc;IAClB,IAAID,2BAA2B,EAAE;MAC/BC,cAAc,GAAG,CAAC,CAACH,OAAO,CAACJ,kBAAkB;IAC/C,CAAC,MAAM;MACLO,cAAc,GAAG,IAAI,CAACC,SAAS,CAACJ,OAAO,CAACJ,kBAAkB;IAC5D;;IAEA;IACA,IAAIO,cAAc,EAAE;MAClB,MAAME,6BAA6B,GAAGL,OAAO,IACxC,OAAOA,OAAO,KAAK,QAAS,IAC5B,sBAAsB,IAAIA,OAAQ;MACvC,MAAMM,eAAe,GAAGD,6BAA6B,GACnD;QAAEE,oBAAoB,EAAEP,OAAO,CAACO;MAAqB,CAAC,GACtD,IAAI;MACN,MAAM,IAAI,CAACC,SAAS,CAACF,eAAe,CAAC,CAACG,IAAI,CACxC,MAAM;QACJ,IAAI,CAACC,GAAG,GAAG,MAAM;MACnB,CACF,CAAC;IACH;EACF,CAAC,EAAE,IAAI,EAAEZ,OAAO,CAAC;AACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}