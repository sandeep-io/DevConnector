{"ast":null,"code":"'use strict';\n\nconst {\n  queryMiddlewareFunctions,\n  aggregateMiddlewareFunctions,\n  modelMiddlewareFunctions,\n  documentMiddlewareFunctions\n} = require('../../constants');\nconst middlewareFunctions = Array.from(new Set([...queryMiddlewareFunctions, ...aggregateMiddlewareFunctions, ...modelMiddlewareFunctions, ...documentMiddlewareFunctions]));\nmodule.exports = function applyStaticHooks(model, hooks, statics) {\n  hooks = hooks.filter(hook => {\n    // If the custom static overwrites an existing middleware, don't apply\n    // middleware to it by default. This avoids a potential backwards breaking\n    // change with plugins like `mongoose-delete` that use statics to overwrite\n    // built-in Mongoose functions.\n    if (middlewareFunctions.indexOf(hook.name) !== -1) {\n      return !!hook.model;\n    }\n    return hook.model !== false;\n  });\n  for (const key of Object.keys(statics)) {\n    if (hooks.hasHooks(key)) {\n      const original = model[key];\n      model[key] = hooks.createWrapper(key, original);\n    }\n  }\n};","map":{"version":3,"names":["queryMiddlewareFunctions","aggregateMiddlewareFunctions","modelMiddlewareFunctions","documentMiddlewareFunctions","require","middlewareFunctions","Array","from","Set","module","exports","applyStaticHooks","model","hooks","statics","filter","hook","indexOf","name","key","Object","keys","hasHooks","original","createWrapper"],"sources":["C:/DEVC/node_modules/mongoose/lib/helpers/model/applyStaticHooks.js"],"sourcesContent":["'use strict';\n\nconst { queryMiddlewareFunctions, aggregateMiddlewareFunctions, modelMiddlewareFunctions, documentMiddlewareFunctions } = require('../../constants');\n\nconst middlewareFunctions = Array.from(\n  new Set([\n    ...queryMiddlewareFunctions,\n    ...aggregateMiddlewareFunctions,\n    ...modelMiddlewareFunctions,\n    ...documentMiddlewareFunctions\n  ])\n);\n\nmodule.exports = function applyStaticHooks(model, hooks, statics) {\n  hooks = hooks.filter(hook => {\n    // If the custom static overwrites an existing middleware, don't apply\n    // middleware to it by default. This avoids a potential backwards breaking\n    // change with plugins like `mongoose-delete` that use statics to overwrite\n    // built-in Mongoose functions.\n    if (middlewareFunctions.indexOf(hook.name) !== -1) {\n      return !!hook.model;\n    }\n    return hook.model !== false;\n  });\n\n  for (const key of Object.keys(statics)) {\n    if (hooks.hasHooks(key)) {\n      const original = model[key];\n\n      model[key] = hooks.createWrapper(key, original);\n    }\n  }\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAM;EAAEA,wBAAwB;EAAEC,4BAA4B;EAAEC,wBAAwB;EAAEC;AAA4B,CAAC,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAEpJ,MAAMC,mBAAmB,GAAGC,KAAK,CAACC,IAAI,CACpC,IAAIC,GAAG,CAAC,CACN,GAAGR,wBAAwB,EAC3B,GAAGC,4BAA4B,EAC/B,GAAGC,wBAAwB,EAC3B,GAAGC,2BAA2B,CAC/B,CACH,CAAC;AAEDM,MAAM,CAACC,OAAO,GAAG,SAASC,gBAAgBA,CAACC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAChED,KAAK,GAAGA,KAAK,CAACE,MAAM,CAACC,IAAI,IAAI;IAC3B;IACA;IACA;IACA;IACA,IAAIX,mBAAmB,CAACY,OAAO,CAACD,IAAI,CAACE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;MACjD,OAAO,CAAC,CAACF,IAAI,CAACJ,KAAK;IACrB;IACA,OAAOI,IAAI,CAACJ,KAAK,KAAK,KAAK;EAC7B,CAAC,CAAC;EAEF,KAAK,MAAMO,GAAG,IAAIC,MAAM,CAACC,IAAI,CAACP,OAAO,CAAC,EAAE;IACtC,IAAID,KAAK,CAACS,QAAQ,CAACH,GAAG,CAAC,EAAE;MACvB,MAAMI,QAAQ,GAAGX,KAAK,CAACO,GAAG,CAAC;MAE3BP,KAAK,CAACO,GAAG,CAAC,GAAGN,KAAK,CAACW,aAAa,CAACL,GAAG,EAAEI,QAAQ,CAAC;IACjD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}