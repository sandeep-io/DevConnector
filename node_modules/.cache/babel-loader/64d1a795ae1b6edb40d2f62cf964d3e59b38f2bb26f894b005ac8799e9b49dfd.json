{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SetProfilingLevelOperation = exports.ProfilingLevel = void 0;\nconst responses_1 = require(\"../cmap/wire_protocol/responses\");\nconst error_1 = require(\"../error\");\nconst utils_1 = require(\"../utils\");\nconst command_1 = require(\"./command\");\nconst levelValues = new Set(['off', 'slow_only', 'all']);\n/** @public */\nexports.ProfilingLevel = Object.freeze({\n  off: 'off',\n  slowOnly: 'slow_only',\n  all: 'all'\n});\n/** @internal */\nclass SetProfilingLevelOperation extends command_1.CommandOperation {\n  constructor(db, level, options) {\n    super(db, options);\n    this.SERVER_COMMAND_RESPONSE_TYPE = responses_1.MongoDBResponse;\n    this.options = options;\n    switch (level) {\n      case exports.ProfilingLevel.off:\n        this.profile = 0;\n        break;\n      case exports.ProfilingLevel.slowOnly:\n        this.profile = 1;\n        break;\n      case exports.ProfilingLevel.all:\n        this.profile = 2;\n        break;\n      default:\n        this.profile = 0;\n        break;\n    }\n    this.level = level;\n  }\n  get commandName() {\n    return 'profile';\n  }\n  buildCommandDocument(_connection) {\n    const level = this.level;\n    if (!levelValues.has(level)) {\n      // TODO(NODE-3483): Determine error to put here\n      throw new error_1.MongoInvalidArgumentError(`Profiling level must be one of \"${(0, utils_1.enumToString)(exports.ProfilingLevel)}\"`);\n    }\n    return {\n      profile: this.profile\n    };\n  }\n  handleOk(_response) {\n    return this.level;\n  }\n}\nexports.SetProfilingLevelOperation = SetProfilingLevelOperation;","map":{"version":3,"names":["responses_1","require","error_1","utils_1","command_1","levelValues","Set","exports","ProfilingLevel","Object","freeze","off","slowOnly","all","SetProfilingLevelOperation","CommandOperation","constructor","db","level","options","SERVER_COMMAND_RESPONSE_TYPE","MongoDBResponse","profile","commandName","buildCommandDocument","_connection","has","MongoInvalidArgumentError","enumToString","handleOk","_response"],"sources":["C:\\DEVC\\node_modules\\mongodb\\src\\operations\\set_profiling_level.ts"],"sourcesContent":["import { type Document } from '../bson';\nimport { type Connection } from '../cmap/connection';\nimport { MongoDBResponse } from '../cmap/wire_protocol/responses';\nimport type { Db } from '../db';\nimport { MongoInvalidArgumentError } from '../error';\nimport { enumToString } from '../utils';\nimport { CommandOperation, type CommandOperationOptions } from './command';\n\nconst levelValues = new Set(['off', 'slow_only', 'all']);\n\n/** @public */\nexport const ProfilingLevel = Object.freeze({\n  off: 'off',\n  slowOnly: 'slow_only',\n  all: 'all'\n} as const);\n\n/** @public */\nexport type ProfilingLevel = (typeof ProfilingLevel)[keyof typeof ProfilingLevel];\n\n/** @public */\nexport type SetProfilingLevelOptions = Omit<CommandOperationOptions, 'rawData'>;\n\n/** @internal */\nexport class SetProfilingLevelOperation extends CommandOperation<ProfilingLevel> {\n  override SERVER_COMMAND_RESPONSE_TYPE = MongoDBResponse;\n  override options: SetProfilingLevelOptions;\n  level: ProfilingLevel;\n  profile: 0 | 1 | 2;\n\n  constructor(db: Db, level: ProfilingLevel, options: SetProfilingLevelOptions) {\n    super(db, options);\n    this.options = options;\n    switch (level) {\n      case ProfilingLevel.off:\n        this.profile = 0;\n        break;\n      case ProfilingLevel.slowOnly:\n        this.profile = 1;\n        break;\n      case ProfilingLevel.all:\n        this.profile = 2;\n        break;\n      default:\n        this.profile = 0;\n        break;\n    }\n\n    this.level = level;\n  }\n\n  override get commandName() {\n    return 'profile' as const;\n  }\n\n  override buildCommandDocument(_connection: Connection): Document {\n    const level = this.level;\n\n    if (!levelValues.has(level)) {\n      // TODO(NODE-3483): Determine error to put here\n      throw new MongoInvalidArgumentError(\n        `Profiling level must be one of \"${enumToString(ProfilingLevel)}\"`\n      );\n    }\n\n    return { profile: this.profile };\n  }\n\n  override handleOk(\n    _response: InstanceType<typeof this.SERVER_COMMAND_RESPONSE_TYPE>\n  ): ProfilingLevel {\n    return this.level;\n  }\n}\n"],"mappings":";;;;;;AAEA,MAAAA,WAAA,GAAAC,OAAA;AAEA,MAAAC,OAAA,GAAAD,OAAA;AACA,MAAAE,OAAA,GAAAF,OAAA;AACA,MAAAG,SAAA,GAAAH,OAAA;AAEA,MAAMI,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC,KAAK,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;AAExD;AACaC,OAAA,CAAAC,cAAc,GAAGC,MAAM,CAACC,MAAM,CAAC;EAC1CC,GAAG,EAAE,KAAK;EACVC,QAAQ,EAAE,WAAW;EACrBC,GAAG,EAAE;CACG,CAAC;AAQX;AACA,MAAaC,0BAA2B,SAAQV,SAAA,CAAAW,gBAAgC;EAM9EC,YAAYC,EAAM,EAAEC,KAAqB,EAAEC,OAAiC;IAC1E,KAAK,CAACF,EAAE,EAAEE,OAAO,CAAC;IANX,KAAAC,4BAA4B,GAAGpB,WAAA,CAAAqB,eAAe;IAOrD,IAAI,CAACF,OAAO,GAAGA,OAAO;IACtB,QAAQD,KAAK;MACX,KAAKX,OAAA,CAAAC,cAAc,CAACG,GAAG;QACrB,IAAI,CAACW,OAAO,GAAG,CAAC;QAChB;MACF,KAAKf,OAAA,CAAAC,cAAc,CAACI,QAAQ;QAC1B,IAAI,CAACU,OAAO,GAAG,CAAC;QAChB;MACF,KAAKf,OAAA,CAAAC,cAAc,CAACK,GAAG;QACrB,IAAI,CAACS,OAAO,GAAG,CAAC;QAChB;MACF;QACE,IAAI,CAACA,OAAO,GAAG,CAAC;QAChB;IACJ;IAEA,IAAI,CAACJ,KAAK,GAAGA,KAAK;EACpB;EAEA,IAAaK,WAAWA,CAAA;IACtB,OAAO,SAAkB;EAC3B;EAESC,oBAAoBA,CAACC,WAAuB;IACnD,MAAMP,KAAK,GAAG,IAAI,CAACA,KAAK;IAExB,IAAI,CAACb,WAAW,CAACqB,GAAG,CAACR,KAAK,CAAC,EAAE;MAC3B;MACA,MAAM,IAAIhB,OAAA,CAAAyB,yBAAyB,CACjC,mCAAmC,IAAAxB,OAAA,CAAAyB,YAAY,EAACrB,OAAA,CAAAC,cAAc,CAAC,GAAG,CACnE;IACH;IAEA,OAAO;MAAEc,OAAO,EAAE,IAAI,CAACA;IAAO,CAAE;EAClC;EAESO,QAAQA,CACfC,SAAiE;IAEjE,OAAO,IAAI,CAACZ,KAAK;EACnB;;AAhDFX,OAAA,CAAAO,0BAAA,GAAAA,0BAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}