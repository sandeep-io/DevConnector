{"ast":null,"code":"'use strict';\n\nconst utils = require('../../utils');\nmodule.exports = function applyWriteConcern(schema, options) {\n  if (options.writeConcern != null) {\n    return;\n  }\n  // Don't apply default write concern to operations in transactions,\n  // because setting write concern on an operation in a transaction is an error\n  // See: https://www.mongodb.com/docs/manual/reference/write-concern/\n  if (options?.session?.transaction) {\n    return;\n  }\n  const writeConcern = schema.options.writeConcern ?? {};\n  if (utils.hasOwnKeys(writeConcern)) {\n    options.writeConcern = {};\n    if (!('w' in options) && writeConcern.w != null) {\n      options.writeConcern.w = writeConcern.w;\n    }\n    if (!('j' in options) && writeConcern.j != null) {\n      options.writeConcern.j = writeConcern.j;\n    }\n    if (!('wtimeout' in options) && writeConcern.wtimeout != null) {\n      options.writeConcern.wtimeout = writeConcern.wtimeout;\n    }\n  } else {\n    if (!('w' in options) && writeConcern.w != null) {\n      options.w = writeConcern.w;\n    }\n    if (!('j' in options) && writeConcern.j != null) {\n      options.j = writeConcern.j;\n    }\n    if (!('wtimeout' in options) && writeConcern.wtimeout != null) {\n      options.wtimeout = writeConcern.wtimeout;\n    }\n  }\n};","map":{"version":3,"names":["utils","require","module","exports","applyWriteConcern","schema","options","writeConcern","session","transaction","hasOwnKeys","w","j","wtimeout"],"sources":["C:/DEVC/node_modules/mongoose/lib/helpers/schema/applyWriteConcern.js"],"sourcesContent":["'use strict';\n\nconst utils = require('../../utils');\n\nmodule.exports = function applyWriteConcern(schema, options) {\n  if (options.writeConcern != null) {\n    return;\n  }\n  // Don't apply default write concern to operations in transactions,\n  // because setting write concern on an operation in a transaction is an error\n  // See: https://www.mongodb.com/docs/manual/reference/write-concern/\n  if (options?.session?.transaction) {\n    return;\n  }\n  const writeConcern = schema.options.writeConcern ?? {};\n  if (utils.hasOwnKeys(writeConcern)) {\n    options.writeConcern = {};\n    if (!('w' in options) && writeConcern.w != null) {\n      options.writeConcern.w = writeConcern.w;\n    }\n    if (!('j' in options) && writeConcern.j != null) {\n      options.writeConcern.j = writeConcern.j;\n    }\n    if (!('wtimeout' in options) && writeConcern.wtimeout != null) {\n      options.writeConcern.wtimeout = writeConcern.wtimeout;\n    }\n  }\n  else {\n    if (!('w' in options) && writeConcern.w != null) {\n      options.w = writeConcern.w;\n    }\n    if (!('j' in options) && writeConcern.j != null) {\n      options.j = writeConcern.j;\n    }\n    if (!('wtimeout' in options) && writeConcern.wtimeout != null) {\n      options.wtimeout = writeConcern.wtimeout;\n    }\n  }\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,KAAK,GAAGC,OAAO,CAAC,aAAa,CAAC;AAEpCC,MAAM,CAACC,OAAO,GAAG,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,OAAO,EAAE;EAC3D,IAAIA,OAAO,CAACC,YAAY,IAAI,IAAI,EAAE;IAChC;EACF;EACA;EACA;EACA;EACA,IAAID,OAAO,EAAEE,OAAO,EAAEC,WAAW,EAAE;IACjC;EACF;EACA,MAAMF,YAAY,GAAGF,MAAM,CAACC,OAAO,CAACC,YAAY,IAAI,CAAC,CAAC;EACtD,IAAIP,KAAK,CAACU,UAAU,CAACH,YAAY,CAAC,EAAE;IAClCD,OAAO,CAACC,YAAY,GAAG,CAAC,CAAC;IACzB,IAAI,EAAE,GAAG,IAAID,OAAO,CAAC,IAAIC,YAAY,CAACI,CAAC,IAAI,IAAI,EAAE;MAC/CL,OAAO,CAACC,YAAY,CAACI,CAAC,GAAGJ,YAAY,CAACI,CAAC;IACzC;IACA,IAAI,EAAE,GAAG,IAAIL,OAAO,CAAC,IAAIC,YAAY,CAACK,CAAC,IAAI,IAAI,EAAE;MAC/CN,OAAO,CAACC,YAAY,CAACK,CAAC,GAAGL,YAAY,CAACK,CAAC;IACzC;IACA,IAAI,EAAE,UAAU,IAAIN,OAAO,CAAC,IAAIC,YAAY,CAACM,QAAQ,IAAI,IAAI,EAAE;MAC7DP,OAAO,CAACC,YAAY,CAACM,QAAQ,GAAGN,YAAY,CAACM,QAAQ;IACvD;EACF,CAAC,MACI;IACH,IAAI,EAAE,GAAG,IAAIP,OAAO,CAAC,IAAIC,YAAY,CAACI,CAAC,IAAI,IAAI,EAAE;MAC/CL,OAAO,CAACK,CAAC,GAAGJ,YAAY,CAACI,CAAC;IAC5B;IACA,IAAI,EAAE,GAAG,IAAIL,OAAO,CAAC,IAAIC,YAAY,CAACK,CAAC,IAAI,IAAI,EAAE;MAC/CN,OAAO,CAACM,CAAC,GAAGL,YAAY,CAACK,CAAC;IAC5B;IACA,IAAI,EAAE,UAAU,IAAIN,OAAO,CAAC,IAAIC,YAAY,CAACM,QAAQ,IAAI,IAAI,EAAE;MAC7DP,OAAO,CAACO,QAAQ,GAAGN,YAAY,CAACM,QAAQ;IAC1C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}