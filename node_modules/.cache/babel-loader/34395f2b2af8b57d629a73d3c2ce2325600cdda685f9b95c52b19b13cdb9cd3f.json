{"ast":null,"code":"/*!\n * Module requirements\n */\n\n'use strict';\n\nconst MongooseError = require('./mongooseError');\nconst getConstructorName = require('../helpers/getConstructorName');\nconst util = require('util');\nconst combinePathErrors = require('../helpers/error/combinePathErrors');\n\n/**\n * Document Validation Error\n *\n * @api private\n * @param {Document} [instance]\n * @inherits MongooseError\n */\n\nclass ValidationError extends MongooseError {\n  constructor(instance) {\n    let _message;\n    if (getConstructorName(instance) === 'model') {\n      _message = instance.constructor.modelName + ' validation failed';\n    } else {\n      _message = 'Validation failed';\n    }\n    super(_message);\n    this.errors = {};\n    this._message = _message;\n    if (instance) {\n      instance.$errors = this.errors;\n    }\n  }\n\n  /**\n   * Console.log helper\n   */\n  toString() {\n    return this.name + ': ' + combinePathErrors(this);\n  }\n\n  /**\n  * add message\n  * @param {String} path\n  * @param {String|Error} error\n  * @api private\n  */\n  addError(path, error) {\n    if (error instanceof ValidationError) {\n      const {\n        errors\n      } = error;\n      for (const errorPath of Object.keys(errors)) {\n        this.addError(`${path}.${errorPath}`, errors[errorPath]);\n      }\n      return;\n    }\n    this.errors[path] = error;\n    this.message = this._message + ': ' + combinePathErrors(this);\n  }\n}\nif (util.inspect.custom) {\n  // Avoid Node deprecation warning DEP0079\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n\n/**\n * Helper for JSON.stringify\n * Ensure `name` and `message` show up in toJSON output re: gh-9847\n * @api private\n */\nObject.defineProperty(ValidationError.prototype, 'toJSON', {\n  enumerable: false,\n  writable: false,\n  configurable: true,\n  value: function () {\n    return Object.assign({}, this, {\n      name: this.name,\n      message: this.message\n    });\n  }\n});\nObject.defineProperty(ValidationError.prototype, 'name', {\n  value: 'ValidationError'\n});\n\n/*!\n * Module exports\n */\n\nmodule.exports = ValidationError;","map":{"version":3,"names":["MongooseError","require","getConstructorName","util","combinePathErrors","ValidationError","constructor","instance","_message","modelName","errors","$errors","toString","name","addError","path","error","errorPath","Object","keys","message","inspect","custom","prototype","defineProperty","enumerable","writable","configurable","value","assign","module","exports"],"sources":["C:/DEVC/node_modules/mongoose/lib/error/validation.js"],"sourcesContent":["/*!\n * Module requirements\n */\n\n'use strict';\n\nconst MongooseError = require('./mongooseError');\nconst getConstructorName = require('../helpers/getConstructorName');\nconst util = require('util');\nconst combinePathErrors = require('../helpers/error/combinePathErrors');\n\n/**\n * Document Validation Error\n *\n * @api private\n * @param {Document} [instance]\n * @inherits MongooseError\n */\n\nclass ValidationError extends MongooseError {\n\n  constructor(instance) {\n    let _message;\n    if (getConstructorName(instance) === 'model') {\n      _message = instance.constructor.modelName + ' validation failed';\n    } else {\n      _message = 'Validation failed';\n    }\n\n    super(_message);\n\n    this.errors = {};\n    this._message = _message;\n\n    if (instance) {\n      instance.$errors = this.errors;\n    }\n  }\n\n  /**\n   * Console.log helper\n   */\n  toString() {\n    return this.name + ': ' + combinePathErrors(this);\n  }\n\n  /**\n  * add message\n  * @param {String} path\n  * @param {String|Error} error\n  * @api private\n  */\n  addError(path, error) {\n    if (error instanceof ValidationError) {\n      const { errors } = error;\n      for (const errorPath of Object.keys(errors)) {\n        this.addError(`${path}.${errorPath}`, errors[errorPath]);\n      }\n\n      return;\n    }\n\n    this.errors[path] = error;\n    this.message = this._message + ': ' + combinePathErrors(this);\n  }\n}\n\n\nif (util.inspect.custom) {\n  // Avoid Node deprecation warning DEP0079\n  ValidationError.prototype[util.inspect.custom] = ValidationError.prototype.inspect;\n}\n\n/**\n * Helper for JSON.stringify\n * Ensure `name` and `message` show up in toJSON output re: gh-9847\n * @api private\n */\nObject.defineProperty(ValidationError.prototype, 'toJSON', {\n  enumerable: false,\n  writable: false,\n  configurable: true,\n  value: function() {\n    return Object.assign({}, this, { name: this.name, message: this.message });\n  }\n});\n\n\nObject.defineProperty(ValidationError.prototype, 'name', {\n  value: 'ValidationError'\n});\n\n/*!\n * Module exports\n */\n\nmodule.exports = ValidationError;\n"],"mappings":"AAAA;AACA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,aAAa,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAChD,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AACnE,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMG,iBAAiB,GAAGH,OAAO,CAAC,oCAAoC,CAAC;;AAEvE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMI,eAAe,SAASL,aAAa,CAAC;EAE1CM,WAAWA,CAACC,QAAQ,EAAE;IACpB,IAAIC,QAAQ;IACZ,IAAIN,kBAAkB,CAACK,QAAQ,CAAC,KAAK,OAAO,EAAE;MAC5CC,QAAQ,GAAGD,QAAQ,CAACD,WAAW,CAACG,SAAS,GAAG,oBAAoB;IAClE,CAAC,MAAM;MACLD,QAAQ,GAAG,mBAAmB;IAChC;IAEA,KAAK,CAACA,QAAQ,CAAC;IAEf,IAAI,CAACE,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,CAACF,QAAQ,GAAGA,QAAQ;IAExB,IAAID,QAAQ,EAAE;MACZA,QAAQ,CAACI,OAAO,GAAG,IAAI,CAACD,MAAM;IAChC;EACF;;EAEA;AACF;AACA;EACEE,QAAQA,CAAA,EAAG;IACT,OAAO,IAAI,CAACC,IAAI,GAAG,IAAI,GAAGT,iBAAiB,CAAC,IAAI,CAAC;EACnD;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEU,QAAQA,CAACC,IAAI,EAAEC,KAAK,EAAE;IACpB,IAAIA,KAAK,YAAYX,eAAe,EAAE;MACpC,MAAM;QAAEK;MAAO,CAAC,GAAGM,KAAK;MACxB,KAAK,MAAMC,SAAS,IAAIC,MAAM,CAACC,IAAI,CAACT,MAAM,CAAC,EAAE;QAC3C,IAAI,CAACI,QAAQ,CAAC,GAAGC,IAAI,IAAIE,SAAS,EAAE,EAAEP,MAAM,CAACO,SAAS,CAAC,CAAC;MAC1D;MAEA;IACF;IAEA,IAAI,CAACP,MAAM,CAACK,IAAI,CAAC,GAAGC,KAAK;IACzB,IAAI,CAACI,OAAO,GAAG,IAAI,CAACZ,QAAQ,GAAG,IAAI,GAAGJ,iBAAiB,CAAC,IAAI,CAAC;EAC/D;AACF;AAGA,IAAID,IAAI,CAACkB,OAAO,CAACC,MAAM,EAAE;EACvB;EACAjB,eAAe,CAACkB,SAAS,CAACpB,IAAI,CAACkB,OAAO,CAACC,MAAM,CAAC,GAAGjB,eAAe,CAACkB,SAAS,CAACF,OAAO;AACpF;;AAEA;AACA;AACA;AACA;AACA;AACAH,MAAM,CAACM,cAAc,CAACnB,eAAe,CAACkB,SAAS,EAAE,QAAQ,EAAE;EACzDE,UAAU,EAAE,KAAK;EACjBC,QAAQ,EAAE,KAAK;EACfC,YAAY,EAAE,IAAI;EAClBC,KAAK,EAAE,SAAAA,CAAA,EAAW;IAChB,OAAOV,MAAM,CAACW,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE;MAAEhB,IAAI,EAAE,IAAI,CAACA,IAAI;MAAEO,OAAO,EAAE,IAAI,CAACA;IAAQ,CAAC,CAAC;EAC5E;AACF,CAAC,CAAC;AAGFF,MAAM,CAACM,cAAc,CAACnB,eAAe,CAACkB,SAAS,EAAE,MAAM,EAAE;EACvDK,KAAK,EAAE;AACT,CAAC,CAAC;;AAEF;AACA;AACA;;AAEAE,MAAM,CAACC,OAAO,GAAG1B,eAAe","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}