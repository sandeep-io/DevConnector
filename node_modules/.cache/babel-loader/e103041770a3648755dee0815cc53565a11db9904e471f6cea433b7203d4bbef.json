{"ast":null,"code":"'use strict';\n\n/*!\n * Module dependencies.\n */\nconst CastError = require('../error/cast');\nconst SchemaType = require('../schemaType');\nconst castDouble = require('../cast/double');\nconst createJSONSchemaTypeDefinition = require('../helpers/createJSONSchemaTypeDefinition');\n\n/**\n * Double SchemaType constructor.\n *\n * @param {String} path\n * @param {Object} options\n * @param {Object} schemaOptions\n * @param {Schema} parentSchema\n * @inherits SchemaType\n * @api public\n */\n\nfunction SchemaDouble(path, options, _schemaOptions, parentSchema) {\n  SchemaType.call(this, path, options, 'Double', parentSchema);\n}\n\n/**\n * This schema type's name, to defend against minifiers that mangle\n * function names.\n *\n * @api public\n */\nSchemaDouble.schemaName = 'Double';\nSchemaDouble.defaultOptions = {};\n\n/*!\n * Inherits from SchemaType.\n */\nSchemaDouble.prototype = Object.create(SchemaType.prototype);\nSchemaDouble.prototype.constructor = SchemaDouble;\n\n/*!\n * ignore\n */\n\nSchemaDouble._cast = castDouble;\n\n/**\n * Sets a default option for all Double instances.\n *\n * #### Example:\n *\n *     // Make all Double fields required by default\n *     mongoose.Schema.Double.set('required', true);\n *\n * @param {String} option The option you'd like to set the value for\n * @param {Any} value value for option\n * @return {undefined}\n * @function set\n * @static\n * @api public\n */\n\nSchemaDouble.set = SchemaType.set;\nSchemaDouble.setters = [];\n\n/**\n * Attaches a getter for all Double instances\n *\n * #### Example:\n *\n *     // Converts Double to be a represent milliseconds upon access\n *     mongoose.Schema.Double.get(v => v == null ? '0.000 ms' : v.toString() + ' ms');\n *\n * @param {Function} getter\n * @return {this}\n * @function get\n * @static\n * @api public\n */\n\nSchemaDouble.get = SchemaType.get;\n\n/*!\n * ignore\n */\n\nSchemaDouble._defaultCaster = v => {\n  if (v != null) {\n    if (v._bsontype !== 'Double') {\n      throw new Error();\n    }\n  }\n  return v;\n};\n\n/**\n * Get/set the function used to cast arbitrary values to  IEEE 754-2008 floating points\n *\n * #### Example:\n *\n *     // Make Mongoose cast any NaNs to 0\n *     const defaultCast = mongoose.Schema.Types.Double.cast();\n *     mongoose.Schema.Types.Double.cast(v => {\n *       if (isNaN(v)) {\n *         return 0;\n *       }\n *       return defaultCast(v);\n *     });\n *\n *     // Or disable casting for Doubles entirely (only JS numbers are permitted)\n *     mongoose.Schema.Double.cast(false);\n *\n *\n * @param {Function} caster\n * @return {Function}\n * @function cast\n * @static\n * @api public\n */\n\nSchemaDouble.cast = function cast(caster) {\n  if (arguments.length === 0) {\n    return this._cast;\n  }\n  if (caster === false) {\n    caster = this._defaultCaster;\n  }\n  this._cast = caster;\n  return this._cast;\n};\n\n/*!\n * ignore\n */\n\nSchemaDouble._checkRequired = v => v != null;\n/**\n * Override the function the required validator uses to check whether a value\n * passes the `required` check.\n *\n * @param {Function} fn\n * @return {Function}\n * @function checkRequired\n * @static\n * @api public\n */\n\nSchemaDouble.checkRequired = SchemaType.checkRequired;\n\n/**\n * Check if the given value satisfies a required validator.\n *\n * @param {Any} value\n * @return {Boolean}\n * @api public\n */\n\nSchemaDouble.prototype.checkRequired = function (value) {\n  return this.constructor._checkRequired(value);\n};\n\n/**\n * Casts to Double\n *\n * @param {Object} value\n * @param {Object} model this value is optional\n * @api private\n */\n\nSchemaDouble.prototype.cast = function (value) {\n  let castDouble;\n  if (typeof this._castFunction === 'function') {\n    castDouble = this._castFunction;\n  } else if (typeof this.constructor.cast === 'function') {\n    castDouble = this.constructor.cast();\n  } else {\n    castDouble = SchemaDouble.cast();\n  }\n  try {\n    return castDouble(value);\n  } catch (error) {\n    throw new CastError('Double', value, this.path, error, this);\n  }\n};\n\n/*!\n * ignore\n */\n\nfunction handleSingle(val) {\n  return this.cast(val);\n}\nconst $conditionalHandlers = {\n  ...SchemaType.prototype.$conditionalHandlers,\n  $gt: handleSingle,\n  $gte: handleSingle,\n  $lt: handleSingle,\n  $lte: handleSingle\n};\n\n/**\n * Contains the handlers for different query operators for this schema type.\n * For example, `$conditionalHandlers.$lt` is the function Mongoose calls to cast `$lt` filter operators.\n *\n * @property $conditionalHandlers\n * @memberOf SchemaDouble\n * @instance\n * @api public\n */\n\nObject.defineProperty(SchemaDouble.prototype, '$conditionalHandlers', {\n  enumerable: false,\n  value: $conditionalHandlers\n});\n\n/**\n * Returns this schema type's representation in a JSON schema.\n *\n * @param [options]\n * @param [options.useBsonType=false] If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.\n * @returns {Object} JSON schema properties\n */\n\nSchemaDouble.prototype.toJSONSchema = function toJSONSchema(options) {\n  const isRequired = this.options.required && typeof this.options.required !== 'function';\n  return createJSONSchemaTypeDefinition('number', 'double', options?.useBsonType, isRequired);\n};\nSchemaDouble.prototype.autoEncryptionType = function autoEncryptionType() {\n  return 'double';\n};\n\n/*!\n * Module exports.\n */\n\nmodule.exports = SchemaDouble;","map":{"version":3,"names":["CastError","require","SchemaType","castDouble","createJSONSchemaTypeDefinition","SchemaDouble","path","options","_schemaOptions","parentSchema","call","schemaName","defaultOptions","prototype","Object","create","constructor","_cast","set","setters","get","_defaultCaster","v","_bsontype","Error","cast","caster","arguments","length","_checkRequired","checkRequired","value","_castFunction","error","handleSingle","val","$conditionalHandlers","$gt","$gte","$lt","$lte","defineProperty","enumerable","toJSONSchema","isRequired","required","useBsonType","autoEncryptionType","module","exports"],"sources":["C:/DEVC/node_modules/mongoose/lib/schema/double.js"],"sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst CastError = require('../error/cast');\nconst SchemaType = require('../schemaType');\nconst castDouble = require('../cast/double');\nconst createJSONSchemaTypeDefinition = require('../helpers/createJSONSchemaTypeDefinition');\n\n/**\n * Double SchemaType constructor.\n *\n * @param {String} path\n * @param {Object} options\n * @param {Object} schemaOptions\n * @param {Schema} parentSchema\n * @inherits SchemaType\n * @api public\n */\n\nfunction SchemaDouble(path, options, _schemaOptions, parentSchema) {\n  SchemaType.call(this, path, options, 'Double', parentSchema);\n}\n\n/**\n * This schema type's name, to defend against minifiers that mangle\n * function names.\n *\n * @api public\n */\nSchemaDouble.schemaName = 'Double';\n\nSchemaDouble.defaultOptions = {};\n\n/*!\n * Inherits from SchemaType.\n */\nSchemaDouble.prototype = Object.create(SchemaType.prototype);\nSchemaDouble.prototype.constructor = SchemaDouble;\n\n/*!\n * ignore\n */\n\nSchemaDouble._cast = castDouble;\n\n/**\n * Sets a default option for all Double instances.\n *\n * #### Example:\n *\n *     // Make all Double fields required by default\n *     mongoose.Schema.Double.set('required', true);\n *\n * @param {String} option The option you'd like to set the value for\n * @param {Any} value value for option\n * @return {undefined}\n * @function set\n * @static\n * @api public\n */\n\nSchemaDouble.set = SchemaType.set;\n\nSchemaDouble.setters = [];\n\n/**\n * Attaches a getter for all Double instances\n *\n * #### Example:\n *\n *     // Converts Double to be a represent milliseconds upon access\n *     mongoose.Schema.Double.get(v => v == null ? '0.000 ms' : v.toString() + ' ms');\n *\n * @param {Function} getter\n * @return {this}\n * @function get\n * @static\n * @api public\n */\n\nSchemaDouble.get = SchemaType.get;\n\n/*!\n * ignore\n */\n\nSchemaDouble._defaultCaster = v => {\n  if (v != null) {\n    if (v._bsontype !== 'Double') {\n      throw new Error();\n    }\n  }\n\n  return v;\n};\n\n/**\n * Get/set the function used to cast arbitrary values to  IEEE 754-2008 floating points\n *\n * #### Example:\n *\n *     // Make Mongoose cast any NaNs to 0\n *     const defaultCast = mongoose.Schema.Types.Double.cast();\n *     mongoose.Schema.Types.Double.cast(v => {\n *       if (isNaN(v)) {\n *         return 0;\n *       }\n *       return defaultCast(v);\n *     });\n *\n *     // Or disable casting for Doubles entirely (only JS numbers are permitted)\n *     mongoose.Schema.Double.cast(false);\n *\n *\n * @param {Function} caster\n * @return {Function}\n * @function cast\n * @static\n * @api public\n */\n\nSchemaDouble.cast = function cast(caster) {\n  if (arguments.length === 0) {\n    return this._cast;\n  }\n  if (caster === false) {\n    caster = this._defaultCaster;\n  }\n\n  this._cast = caster;\n\n  return this._cast;\n};\n\n\n/*!\n * ignore\n */\n\nSchemaDouble._checkRequired = v => v != null;\n/**\n * Override the function the required validator uses to check whether a value\n * passes the `required` check.\n *\n * @param {Function} fn\n * @return {Function}\n * @function checkRequired\n * @static\n * @api public\n */\n\nSchemaDouble.checkRequired = SchemaType.checkRequired;\n\n/**\n * Check if the given value satisfies a required validator.\n *\n * @param {Any} value\n * @return {Boolean}\n * @api public\n */\n\nSchemaDouble.prototype.checkRequired = function(value) {\n  return this.constructor._checkRequired(value);\n};\n\n/**\n * Casts to Double\n *\n * @param {Object} value\n * @param {Object} model this value is optional\n * @api private\n */\n\nSchemaDouble.prototype.cast = function(value) {\n  let castDouble;\n  if (typeof this._castFunction === 'function') {\n    castDouble = this._castFunction;\n  } else if (typeof this.constructor.cast === 'function') {\n    castDouble = this.constructor.cast();\n  } else {\n    castDouble = SchemaDouble.cast();\n  }\n\n  try {\n    return castDouble(value);\n  } catch (error) {\n    throw new CastError('Double', value, this.path, error, this);\n  }\n};\n\n/*!\n * ignore\n */\n\nfunction handleSingle(val) {\n  return this.cast(val);\n}\n\nconst $conditionalHandlers = {\n  ...SchemaType.prototype.$conditionalHandlers,\n  $gt: handleSingle,\n  $gte: handleSingle,\n  $lt: handleSingle,\n  $lte: handleSingle\n};\n\n/**\n * Contains the handlers for different query operators for this schema type.\n * For example, `$conditionalHandlers.$lt` is the function Mongoose calls to cast `$lt` filter operators.\n *\n * @property $conditionalHandlers\n * @memberOf SchemaDouble\n * @instance\n * @api public\n */\n\nObject.defineProperty(SchemaDouble.prototype, '$conditionalHandlers', {\n  enumerable: false,\n  value: $conditionalHandlers\n});\n\n/**\n * Returns this schema type's representation in a JSON schema.\n *\n * @param [options]\n * @param [options.useBsonType=false] If true, return a representation with `bsonType` for use with MongoDB's `$jsonSchema`.\n * @returns {Object} JSON schema properties\n */\n\nSchemaDouble.prototype.toJSONSchema = function toJSONSchema(options) {\n  const isRequired = this.options.required && typeof this.options.required !== 'function';\n  return createJSONSchemaTypeDefinition('number', 'double', options?.useBsonType, isRequired);\n};\n\nSchemaDouble.prototype.autoEncryptionType = function autoEncryptionType() {\n  return 'double';\n};\n\n/*!\n * Module exports.\n */\n\nmodule.exports = SchemaDouble;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}