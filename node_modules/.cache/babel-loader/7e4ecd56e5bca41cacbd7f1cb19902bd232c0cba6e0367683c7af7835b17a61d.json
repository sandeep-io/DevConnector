{"ast":null,"code":"'use strict';\n\n/*!\n * Module dependencies.\n */\nconst MongooseCollection = require('../../collection');\nconst MongooseError = require('../../error/mongooseError');\nconst Collection = require('mongodb').Collection;\nconst ObjectId = require('../../types/objectid');\nconst getConstructorName = require('../../helpers/getConstructorName');\nconst internalToObjectOptions = require('../../options').internalToObjectOptions;\nconst stream = require('stream');\nconst util = require('util');\nconst formatToObjectOptions = Object.freeze({\n  ...internalToObjectOptions,\n  copyTrustedSymbol: false\n});\n\n/**\n * A [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) collection implementation.\n *\n * All methods methods from the [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) driver are copied and wrapped in queue management.\n *\n * @inherits Collection https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html\n * @api private\n */\n\nfunction NativeCollection(name, conn, options) {\n  this.collection = null;\n  this.Promise = options.Promise || Promise;\n  this.modelName = options.modelName;\n  delete options.modelName;\n  this._closed = false;\n  MongooseCollection.apply(this, arguments);\n}\n\n/*!\n * Inherit from abstract Collection.\n */\n\nObject.setPrototypeOf(NativeCollection.prototype, MongooseCollection.prototype);\n\n/**\n * Called when the connection opens.\n *\n * @api private\n */\n\nNativeCollection.prototype.onOpen = function () {\n  this.collection = this.conn.db.collection(this.name);\n  MongooseCollection.prototype.onOpen.call(this);\n  return this.collection;\n};\n\n/**\n * Called when the connection closes\n *\n * @api private\n */\n\nNativeCollection.prototype.onClose = function (force) {\n  MongooseCollection.prototype.onClose.call(this, force);\n};\n\n/**\n * Helper to get the collection, in case `this.collection` isn't set yet.\n * May happen if `bufferCommands` is false and created the model when\n * Mongoose was disconnected.\n *\n * @api private\n */\n\nNativeCollection.prototype._getCollection = function _getCollection() {\n  if (this.collection) {\n    return this.collection;\n  }\n  if (this.conn.db != null) {\n    this.collection = this.conn.db.collection(this.name);\n    return this.collection;\n  }\n  return null;\n};\n\n/**\n * Copy the collection methods and make them subject to queues\n * @param {Number|String} I\n * @api private\n */\n\nfunction iter(i) {\n  NativeCollection.prototype[i] = function () {\n    const collection = this._getCollection();\n    const args = Array.from(arguments);\n    const _this = this;\n    const globalDebug = _this?.conn?.base?.options?.debug;\n    const connectionDebug = _this?.conn?.options?.debug;\n    const debug = connectionDebug == null ? globalDebug : connectionDebug;\n    const opId = new ObjectId();\n\n    // If user force closed, queueing will hang forever. See #5664\n    if (this.conn.$wasForceClosed) {\n      const error = new MongooseError('Connection was force closed');\n      if (args.length > 0 && typeof args[args.length - 1] === 'function') {\n        args[args.length - 1](error);\n        return;\n      } else {\n        throw error;\n      }\n    }\n    let timeout = null;\n    let waitForBufferPromise = null;\n    if (this._shouldBufferCommands() && this.buffer) {\n      this.conn.emit('buffer', {\n        _id: opId,\n        modelName: _this.modelName,\n        collectionName: _this.name,\n        method: i,\n        args: args\n      });\n      const bufferTimeoutMS = this._getBufferTimeoutMS();\n      waitForBufferPromise = new Promise((resolve, reject) => {\n        this.addQueue(resolve);\n        timeout = setTimeout(() => {\n          const removed = this.removeQueue(resolve);\n          if (removed) {\n            const message = 'Operation `' + this.name + '.' + i + '()` buffering timed out after ' + bufferTimeoutMS + 'ms';\n            const err = new MongooseError(message);\n            this.conn.emit('buffer-end', {\n              _id: opId,\n              modelName: _this.modelName,\n              collectionName: _this.name,\n              method: i,\n              error: err\n            });\n            reject(err);\n          }\n        }, bufferTimeoutMS);\n      });\n      return waitForBufferPromise.then(() => {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        return this[i].apply(this, args);\n      });\n    }\n    if (debug) {\n      if (typeof debug === 'function') {\n        let argsToAdd = null;\n        if (typeof args[args.length - 1] == 'function') {\n          argsToAdd = args.slice(0, args.length - 1);\n        } else {\n          argsToAdd = args;\n        }\n        debug.apply(_this, [_this.name, i].concat(argsToAdd));\n      } else if (debug instanceof stream.Writable) {\n        this.$printToStream(_this.name, i, args, debug);\n      } else {\n        const color = debug.color == null ? true : debug.color;\n        const shell = debug.shell == null ? false : debug.shell;\n        this.$print(_this.name, i, args, color, shell);\n      }\n    }\n    this.conn.emit('operation-start', {\n      _id: opId,\n      modelName: _this.modelName,\n      collectionName: this.name,\n      method: i,\n      params: args\n    });\n    try {\n      if (collection == null) {\n        const message = 'Cannot call `' + this.name + '.' + i + '()` before initial connection ' + 'is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if ' + 'you have `bufferCommands = false`.';\n        throw new MongooseError(message);\n      }\n      const ret = collection[i].apply(collection, args);\n      if (typeof ret?.then === 'function') {\n        return ret.then(result => {\n          if (timeout != null) {\n            clearTimeout(timeout);\n          }\n          this.conn.emit('operation-end', {\n            _id: opId,\n            modelName: _this.modelName,\n            collectionName: this.name,\n            method: i,\n            result\n          });\n          return result;\n        }, error => {\n          if (timeout != null) {\n            clearTimeout(timeout);\n          }\n          this.conn.emit('operation-end', {\n            _id: opId,\n            modelName: _this.modelName,\n            collectionName: this.name,\n            method: i,\n            error\n          });\n          throw error;\n        });\n      }\n      this.conn.emit('operation-end', {\n        _id: opId,\n        modelName: _this.modelName,\n        collectionName: this.name,\n        method: i,\n        result: ret\n      });\n      if (timeout != null) {\n        clearTimeout(timeout);\n      }\n      return ret;\n    } catch (error) {\n      if (timeout != null) {\n        clearTimeout(timeout);\n      }\n      this.conn.emit('operation-end', {\n        _id: opId,\n        modelName: _this.modelName,\n        collectionName: this.name,\n        method: i,\n        error: error\n      });\n      throw error;\n    }\n  };\n}\nfor (const key of Object.getOwnPropertyNames(Collection.prototype)) {\n  // Janky hack to work around gh-3005 until we can get rid of the mongoose\n  // collection abstraction\n  const descriptor = Object.getOwnPropertyDescriptor(Collection.prototype, key);\n  // Skip properties with getters because they may throw errors (gh-8528)\n  if (descriptor.get !== undefined) {\n    continue;\n  }\n  if (typeof Collection.prototype[key] !== 'function') {\n    continue;\n  }\n  iter(key);\n}\n\n/**\n * Debug print helper\n *\n * @api public\n * @method $print\n */\n\nNativeCollection.prototype.$print = function (name, i, args, color, shell) {\n  const moduleName = color ? '\\x1B[0;36mMongoose:\\x1B[0m ' : 'Mongoose: ';\n  const functionCall = [name, i].join('.');\n  const _args = [];\n  for (let j = args.length - 1; j >= 0; --j) {\n    if (this.$format(args[j]) || _args.length) {\n      _args.unshift(this.$format(args[j], color, shell));\n    }\n  }\n  const params = '(' + _args.join(', ') + ')';\n  console.info(moduleName + functionCall + params);\n};\n\n/**\n * Debug print helper\n *\n * @api public\n * @method $print\n */\n\nNativeCollection.prototype.$printToStream = function (name, i, args, stream) {\n  const functionCall = [name, i].join('.');\n  const _args = [];\n  for (let j = args.length - 1; j >= 0; --j) {\n    if (this.$format(args[j]) || _args.length) {\n      _args.unshift(this.$format(args[j]));\n    }\n  }\n  const params = '(' + _args.join(', ') + ')';\n  stream.write(functionCall + params, 'utf8');\n};\n\n/**\n * Formatter for debug print args\n *\n * @api public\n * @method $format\n */\n\nNativeCollection.prototype.$format = function (arg, color, shell) {\n  const type = typeof arg;\n  if (type === 'function' || type === 'undefined') return '';\n  return format(arg, false, color, shell);\n};\n\n/**\n * Debug print helper\n * @param {Any} representation\n * @api private\n */\n\nfunction inspectable(representation) {\n  const ret = {\n    inspect: function () {\n      return representation;\n    }\n  };\n  if (util.inspect.custom) {\n    ret[util.inspect.custom] = ret.inspect;\n  }\n  return ret;\n}\nfunction map(o) {\n  return format(o, true);\n}\nfunction formatObjectId(x, key) {\n  x[key] = inspectable('ObjectId(\"' + x[key].toHexString() + '\")');\n}\nfunction formatDate(x, key, shell) {\n  if (shell) {\n    x[key] = inspectable('ISODate(\"' + x[key].toUTCString() + '\")');\n  } else {\n    x[key] = inspectable('new Date(\"' + x[key].toUTCString() + '\")');\n  }\n}\nfunction format(obj, sub, color, shell) {\n  if (typeof obj?.toBSON === 'function') {\n    obj = obj.toBSON();\n  }\n  if (obj == null) {\n    return obj;\n  }\n  const clone = require('../../helpers/clone');\n  // `sub` indicates `format()` was called recursively, so skip cloning because we already\n  // did a deep clone on the top-level object.\n  let x = sub ? obj : clone(obj, formatToObjectOptions);\n  const constructorName = getConstructorName(x);\n  if (constructorName === 'Binary') {\n    x = 'BinData(' + x.sub_type + ', \"' + x.toString('base64') + '\")';\n  } else if (constructorName === 'ObjectId') {\n    x = inspectable('ObjectId(\"' + x.toHexString() + '\")');\n  } else if (constructorName === 'Date') {\n    x = inspectable('new Date(\"' + x.toUTCString() + '\")');\n  } else if (constructorName === 'Object') {\n    const keys = Object.keys(x);\n    const numKeys = keys.length;\n    let key;\n    for (let i = 0; i < numKeys; ++i) {\n      key = keys[i];\n      if (x[key]) {\n        let error;\n        if (typeof x[key].toBSON === 'function') {\n          try {\n            // `session.toBSON()` throws an error. This means we throw errors\n            // in debug mode when using transactions, see gh-6712. As a\n            // workaround, catch `toBSON()` errors, try to serialize without\n            // `toBSON()`, and rethrow if serialization still fails.\n            x[key] = x[key].toBSON();\n          } catch (_error) {\n            error = _error;\n          }\n        }\n        const _constructorName = getConstructorName(x[key]);\n        if (_constructorName === 'Binary') {\n          x[key] = 'BinData(' + x[key].sub_type + ', \"' + x[key].buffer.toString('base64') + '\")';\n        } else if (_constructorName === 'Object') {\n          x[key] = format(x[key], true);\n        } else if (_constructorName === 'ObjectId') {\n          formatObjectId(x, key);\n        } else if (_constructorName === 'Date') {\n          formatDate(x, key, shell);\n        } else if (_constructorName === 'ClientSession') {\n          x[key] = inspectable('ClientSession(\"' + (x[key]?.id?.id?.buffer || '').toString('hex') + '\")');\n        } else if (Array.isArray(x[key])) {\n          x[key] = x[key].map(map);\n        } else if (error != null) {\n          // If there was an error with `toBSON()` and the object wasn't\n          // already converted to a string representation, rethrow it.\n          // Open to better ideas on how to handle this.\n          throw error;\n        }\n      }\n    }\n  }\n  if (sub) {\n    return x;\n  }\n  return util.inspect(x, false, 10, color).replace(/\\n/g, '').replace(/\\s{2,}/g, ' ');\n}\n\n/**\n * Retrieves information about this collections indexes.\n *\n * @method getIndexes\n * @api public\n */\n\nNativeCollection.prototype.getIndexes = NativeCollection.prototype.indexInformation;\n\n/*!\n * Module exports.\n */\n\nmodule.exports = NativeCollection;","map":{"version":3,"names":["MongooseCollection","require","MongooseError","Collection","ObjectId","getConstructorName","internalToObjectOptions","stream","util","formatToObjectOptions","Object","freeze","copyTrustedSymbol","NativeCollection","name","conn","options","collection","Promise","modelName","_closed","apply","arguments","setPrototypeOf","prototype","onOpen","db","call","onClose","force","_getCollection","iter","i","args","Array","from","_this","globalDebug","base","debug","connectionDebug","opId","$wasForceClosed","error","length","timeout","waitForBufferPromise","_shouldBufferCommands","buffer","emit","_id","collectionName","method","bufferTimeoutMS","_getBufferTimeoutMS","resolve","reject","addQueue","setTimeout","removed","removeQueue","message","err","then","clearTimeout","argsToAdd","slice","concat","Writable","$printToStream","color","shell","$print","params","ret","result","key","getOwnPropertyNames","descriptor","getOwnPropertyDescriptor","get","undefined","moduleName","functionCall","join","_args","j","$format","unshift","console","info","write","arg","type","format","inspectable","representation","inspect","custom","map","o","formatObjectId","x","toHexString","formatDate","toUTCString","obj","sub","toBSON","clone","constructorName","sub_type","toString","keys","numKeys","_error","_constructorName","id","isArray","replace","getIndexes","indexInformation","module","exports"],"sources":["C:/DEVC/node_modules/mongoose/lib/drivers/node-mongodb-native/collection.js"],"sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst MongooseCollection = require('../../collection');\nconst MongooseError = require('../../error/mongooseError');\nconst Collection = require('mongodb').Collection;\nconst ObjectId = require('../../types/objectid');\nconst getConstructorName = require('../../helpers/getConstructorName');\nconst internalToObjectOptions = require('../../options').internalToObjectOptions;\nconst stream = require('stream');\nconst util = require('util');\n\nconst formatToObjectOptions = Object.freeze({ ...internalToObjectOptions, copyTrustedSymbol: false });\n\n/**\n * A [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) collection implementation.\n *\n * All methods methods from the [node-mongodb-native](https://github.com/mongodb/node-mongodb-native) driver are copied and wrapped in queue management.\n *\n * @inherits Collection https://mongodb.github.io/node-mongodb-native/4.9/classes/Collection.html\n * @api private\n */\n\nfunction NativeCollection(name, conn, options) {\n  this.collection = null;\n  this.Promise = options.Promise || Promise;\n  this.modelName = options.modelName;\n  delete options.modelName;\n  this._closed = false;\n  MongooseCollection.apply(this, arguments);\n}\n\n/*!\n * Inherit from abstract Collection.\n */\n\nObject.setPrototypeOf(NativeCollection.prototype, MongooseCollection.prototype);\n\n/**\n * Called when the connection opens.\n *\n * @api private\n */\n\nNativeCollection.prototype.onOpen = function() {\n  this.collection = this.conn.db.collection(this.name);\n  MongooseCollection.prototype.onOpen.call(this);\n  return this.collection;\n};\n\n/**\n * Called when the connection closes\n *\n * @api private\n */\n\nNativeCollection.prototype.onClose = function(force) {\n  MongooseCollection.prototype.onClose.call(this, force);\n};\n\n/**\n * Helper to get the collection, in case `this.collection` isn't set yet.\n * May happen if `bufferCommands` is false and created the model when\n * Mongoose was disconnected.\n *\n * @api private\n */\n\nNativeCollection.prototype._getCollection = function _getCollection() {\n  if (this.collection) {\n    return this.collection;\n  }\n  if (this.conn.db != null) {\n    this.collection = this.conn.db.collection(this.name);\n    return this.collection;\n  }\n  return null;\n};\n\n/**\n * Copy the collection methods and make them subject to queues\n * @param {Number|String} I\n * @api private\n */\n\nfunction iter(i) {\n  NativeCollection.prototype[i] = function() {\n    const collection = this._getCollection();\n    const args = Array.from(arguments);\n    const _this = this;\n    const globalDebug = _this?.conn?.base?.options?.debug;\n    const connectionDebug = _this?.conn?.options?.debug;\n    const debug = connectionDebug == null ? globalDebug : connectionDebug;\n    const opId = new ObjectId();\n\n    // If user force closed, queueing will hang forever. See #5664\n    if (this.conn.$wasForceClosed) {\n      const error = new MongooseError('Connection was force closed');\n      if (args.length > 0 &&\n        typeof args[args.length - 1] === 'function') {\n        args[args.length - 1](error);\n        return;\n      } else {\n        throw error;\n      }\n    }\n\n    let timeout = null;\n    let waitForBufferPromise = null;\n    if (this._shouldBufferCommands() && this.buffer) {\n      this.conn.emit('buffer', {\n        _id: opId,\n        modelName: _this.modelName,\n        collectionName: _this.name,\n        method: i,\n        args: args\n      });\n\n      const bufferTimeoutMS = this._getBufferTimeoutMS();\n      waitForBufferPromise = new Promise((resolve, reject) => {\n        this.addQueue(resolve);\n\n        timeout = setTimeout(() => {\n          const removed = this.removeQueue(resolve);\n          if (removed) {\n            const message = 'Operation `' + this.name + '.' + i + '()` buffering timed out after ' +\n              bufferTimeoutMS + 'ms';\n            const err = new MongooseError(message);\n            this.conn.emit('buffer-end', { _id: opId, modelName: _this.modelName, collectionName: _this.name, method: i, error: err });\n            reject(err);\n          }\n        }, bufferTimeoutMS);\n      });\n\n      return waitForBufferPromise.then(() => {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        return this[i].apply(this, args);\n      });\n    }\n\n    if (debug) {\n      if (typeof debug === 'function') {\n        let argsToAdd = null;\n        if (typeof args[args.length - 1] == 'function') {\n          argsToAdd = args.slice(0, args.length - 1);\n        } else {\n          argsToAdd = args;\n        }\n        debug.apply(_this,\n          [_this.name, i].concat(argsToAdd));\n      } else if (debug instanceof stream.Writable) {\n        this.$printToStream(_this.name, i, args, debug);\n      } else {\n        const color = debug.color == null ? true : debug.color;\n        const shell = debug.shell == null ? false : debug.shell;\n        this.$print(_this.name, i, args, color, shell);\n      }\n    }\n\n    this.conn.emit('operation-start', { _id: opId, modelName: _this.modelName, collectionName: this.name, method: i, params: args });\n\n    try {\n      if (collection == null) {\n        const message = 'Cannot call `' + this.name + '.' + i + '()` before initial connection ' +\n          'is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if ' +\n          'you have `bufferCommands = false`.';\n        throw new MongooseError(message);\n      }\n\n      const ret = collection[i].apply(collection, args);\n      if (typeof ret?.then === 'function') {\n        return ret.then(\n          result => {\n            if (timeout != null) {\n              clearTimeout(timeout);\n            }\n            this.conn.emit('operation-end', { _id: opId, modelName: _this.modelName, collectionName: this.name, method: i, result });\n            return result;\n          },\n          error => {\n            if (timeout != null) {\n              clearTimeout(timeout);\n            }\n            this.conn.emit('operation-end', { _id: opId, modelName: _this.modelName, collectionName: this.name, method: i, error });\n            throw error;\n          }\n        );\n      }\n\n      this.conn.emit('operation-end', { _id: opId, modelName: _this.modelName, collectionName: this.name, method: i, result: ret });\n      if (timeout != null) {\n        clearTimeout(timeout);\n      }\n      return ret;\n    } catch (error) {\n      if (timeout != null) {\n        clearTimeout(timeout);\n      }\n      this.conn.emit('operation-end', { _id: opId, modelName: _this.modelName, collectionName: this.name, method: i, error: error });\n      throw error;\n    }\n  };\n}\n\nfor (const key of Object.getOwnPropertyNames(Collection.prototype)) {\n  // Janky hack to work around gh-3005 until we can get rid of the mongoose\n  // collection abstraction\n  const descriptor = Object.getOwnPropertyDescriptor(Collection.prototype, key);\n  // Skip properties with getters because they may throw errors (gh-8528)\n  if (descriptor.get !== undefined) {\n    continue;\n  }\n  if (typeof Collection.prototype[key] !== 'function') {\n    continue;\n  }\n\n  iter(key);\n}\n\n/**\n * Debug print helper\n *\n * @api public\n * @method $print\n */\n\nNativeCollection.prototype.$print = function(name, i, args, color, shell) {\n  const moduleName = color ? '\\x1B[0;36mMongoose:\\x1B[0m ' : 'Mongoose: ';\n  const functionCall = [name, i].join('.');\n  const _args = [];\n  for (let j = args.length - 1; j >= 0; --j) {\n    if (this.$format(args[j]) || _args.length) {\n      _args.unshift(this.$format(args[j], color, shell));\n    }\n  }\n  const params = '(' + _args.join(', ') + ')';\n\n  console.info(moduleName + functionCall + params);\n};\n\n/**\n * Debug print helper\n *\n * @api public\n * @method $print\n */\n\nNativeCollection.prototype.$printToStream = function(name, i, args, stream) {\n  const functionCall = [name, i].join('.');\n  const _args = [];\n  for (let j = args.length - 1; j >= 0; --j) {\n    if (this.$format(args[j]) || _args.length) {\n      _args.unshift(this.$format(args[j]));\n    }\n  }\n  const params = '(' + _args.join(', ') + ')';\n\n  stream.write(functionCall + params, 'utf8');\n};\n\n/**\n * Formatter for debug print args\n *\n * @api public\n * @method $format\n */\n\nNativeCollection.prototype.$format = function(arg, color, shell) {\n  const type = typeof arg;\n  if (type === 'function' || type === 'undefined') return '';\n  return format(arg, false, color, shell);\n};\n\n/**\n * Debug print helper\n * @param {Any} representation\n * @api private\n */\n\nfunction inspectable(representation) {\n  const ret = {\n    inspect: function() { return representation; }\n  };\n  if (util.inspect.custom) {\n    ret[util.inspect.custom] = ret.inspect;\n  }\n  return ret;\n}\nfunction map(o) {\n  return format(o, true);\n}\nfunction formatObjectId(x, key) {\n  x[key] = inspectable('ObjectId(\"' + x[key].toHexString() + '\")');\n}\nfunction formatDate(x, key, shell) {\n  if (shell) {\n    x[key] = inspectable('ISODate(\"' + x[key].toUTCString() + '\")');\n  } else {\n    x[key] = inspectable('new Date(\"' + x[key].toUTCString() + '\")');\n  }\n}\nfunction format(obj, sub, color, shell) {\n  if (typeof obj?.toBSON === 'function') {\n    obj = obj.toBSON();\n  }\n  if (obj == null) {\n    return obj;\n  }\n\n  const clone = require('../../helpers/clone');\n  // `sub` indicates `format()` was called recursively, so skip cloning because we already\n  // did a deep clone on the top-level object.\n  let x = sub ? obj : clone(obj, formatToObjectOptions);\n  const constructorName = getConstructorName(x);\n\n  if (constructorName === 'Binary') {\n    x = 'BinData(' + x.sub_type + ', \"' + x.toString('base64') + '\")';\n  } else if (constructorName === 'ObjectId') {\n    x = inspectable('ObjectId(\"' + x.toHexString() + '\")');\n  } else if (constructorName === 'Date') {\n    x = inspectable('new Date(\"' + x.toUTCString() + '\")');\n  } else if (constructorName === 'Object') {\n    const keys = Object.keys(x);\n    const numKeys = keys.length;\n    let key;\n    for (let i = 0; i < numKeys; ++i) {\n      key = keys[i];\n      if (x[key]) {\n        let error;\n        if (typeof x[key].toBSON === 'function') {\n          try {\n            // `session.toBSON()` throws an error. This means we throw errors\n            // in debug mode when using transactions, see gh-6712. As a\n            // workaround, catch `toBSON()` errors, try to serialize without\n            // `toBSON()`, and rethrow if serialization still fails.\n            x[key] = x[key].toBSON();\n          } catch (_error) {\n            error = _error;\n          }\n        }\n        const _constructorName = getConstructorName(x[key]);\n        if (_constructorName === 'Binary') {\n          x[key] = 'BinData(' + x[key].sub_type + ', \"' +\n            x[key].buffer.toString('base64') + '\")';\n        } else if (_constructorName === 'Object') {\n          x[key] = format(x[key], true);\n        } else if (_constructorName === 'ObjectId') {\n          formatObjectId(x, key);\n        } else if (_constructorName === 'Date') {\n          formatDate(x, key, shell);\n        } else if (_constructorName === 'ClientSession') {\n          x[key] = inspectable('ClientSession(\"' +\n            (x[key]?.id?.id?.buffer || '').toString('hex') + '\")');\n        } else if (Array.isArray(x[key])) {\n          x[key] = x[key].map(map);\n        } else if (error != null) {\n          // If there was an error with `toBSON()` and the object wasn't\n          // already converted to a string representation, rethrow it.\n          // Open to better ideas on how to handle this.\n          throw error;\n        }\n      }\n    }\n  }\n  if (sub) {\n    return x;\n  }\n\n  return util.\n    inspect(x, false, 10, color).\n    replace(/\\n/g, '').\n    replace(/\\s{2,}/g, ' ');\n}\n\n/**\n * Retrieves information about this collections indexes.\n *\n * @method getIndexes\n * @api public\n */\n\nNativeCollection.prototype.getIndexes = NativeCollection.prototype.indexInformation;\n\n/*!\n * Module exports.\n */\n\nmodule.exports = NativeCollection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}