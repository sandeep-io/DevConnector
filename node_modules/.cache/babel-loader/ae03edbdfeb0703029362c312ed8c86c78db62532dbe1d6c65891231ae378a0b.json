{"ast":null,"code":"'use strict';\n\nconst assert = require('assert');\nconst BSON = require('mongodb/lib/bson');\nconst isBsonType = require('../helpers/isBsonType');\n\n/**\n * Given a value, cast it to a IEEE 754-2008 floating point, or throw an `Error` if the value\n * cannot be casted. `null`, `undefined`, and `NaN` are considered valid inputs.\n *\n * @param {Any} value\n * @return {Number}\n * @throws {Error} if `value` does not represent a IEEE 754-2008 floating point. If casting from a string, see [BSON Double.fromString API documentation](https://mongodb.github.io/node-mongodb-native/Next/classes/BSON.Double.html#fromString)\n * @api private\n */\n\nmodule.exports = function castDouble(val) {\n  if (val == null || val === '') {\n    return null;\n  }\n  let coercedVal;\n  if (isBsonType(val, 'Long')) {\n    coercedVal = val.toNumber();\n  } else if (typeof val === 'string') {\n    try {\n      coercedVal = BSON.Double.fromString(val);\n      return coercedVal;\n    } catch {\n      assert.ok(false);\n    }\n  } else if (typeof val === 'object') {\n    const tempVal = val.valueOf() ?? val.toString();\n    // ex: { a: 'im an object, valueOf: () => 'helloworld' } // throw an error\n    if (typeof tempVal === 'string') {\n      try {\n        coercedVal = BSON.Double.fromString(tempVal);\n        return coercedVal;\n      } catch {\n        assert.ok(false);\n      }\n    } else {\n      coercedVal = Number(tempVal);\n    }\n  } else {\n    coercedVal = Number(val);\n  }\n  return new BSON.Double(coercedVal);\n};","map":{"version":3,"names":["assert","require","BSON","isBsonType","module","exports","castDouble","val","coercedVal","toNumber","Double","fromString","ok","tempVal","valueOf","toString","Number"],"sources":["C:/DEVC/node_modules/mongoose/lib/cast/double.js"],"sourcesContent":["'use strict';\n\nconst assert = require('assert');\nconst BSON = require('mongodb/lib/bson');\nconst isBsonType = require('../helpers/isBsonType');\n\n/**\n * Given a value, cast it to a IEEE 754-2008 floating point, or throw an `Error` if the value\n * cannot be casted. `null`, `undefined`, and `NaN` are considered valid inputs.\n *\n * @param {Any} value\n * @return {Number}\n * @throws {Error} if `value` does not represent a IEEE 754-2008 floating point. If casting from a string, see [BSON Double.fromString API documentation](https://mongodb.github.io/node-mongodb-native/Next/classes/BSON.Double.html#fromString)\n * @api private\n */\n\nmodule.exports = function castDouble(val) {\n  if (val == null || val === '') {\n    return null;\n  }\n\n  let coercedVal;\n  if (isBsonType(val, 'Long')) {\n    coercedVal = val.toNumber();\n  } else if (typeof val === 'string') {\n    try {\n      coercedVal = BSON.Double.fromString(val);\n      return coercedVal;\n    } catch {\n      assert.ok(false);\n    }\n  } else if (typeof val === 'object') {\n    const tempVal = val.valueOf() ?? val.toString();\n    // ex: { a: 'im an object, valueOf: () => 'helloworld' } // throw an error\n    if (typeof tempVal === 'string') {\n      try {\n        coercedVal = BSON.Double.fromString(tempVal);\n        return coercedVal;\n      } catch {\n        assert.ok(false);\n      }\n    } else {\n      coercedVal = Number(tempVal);\n    }\n  } else {\n    coercedVal = Number(val);\n  }\n\n  return new BSON.Double(coercedVal);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMC,IAAI,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AACxC,MAAME,UAAU,GAAGF,OAAO,CAAC,uBAAuB,CAAC;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAG,MAAM,CAACC,OAAO,GAAG,SAASC,UAAUA,CAACC,GAAG,EAAE;EACxC,IAAIA,GAAG,IAAI,IAAI,IAAIA,GAAG,KAAK,EAAE,EAAE;IAC7B,OAAO,IAAI;EACb;EAEA,IAAIC,UAAU;EACd,IAAIL,UAAU,CAACI,GAAG,EAAE,MAAM,CAAC,EAAE;IAC3BC,UAAU,GAAGD,GAAG,CAACE,QAAQ,CAAC,CAAC;EAC7B,CAAC,MAAM,IAAI,OAAOF,GAAG,KAAK,QAAQ,EAAE;IAClC,IAAI;MACFC,UAAU,GAAGN,IAAI,CAACQ,MAAM,CAACC,UAAU,CAACJ,GAAG,CAAC;MACxC,OAAOC,UAAU;IACnB,CAAC,CAAC,MAAM;MACNR,MAAM,CAACY,EAAE,CAAC,KAAK,CAAC;IAClB;EACF,CAAC,MAAM,IAAI,OAAOL,GAAG,KAAK,QAAQ,EAAE;IAClC,MAAMM,OAAO,GAAGN,GAAG,CAACO,OAAO,CAAC,CAAC,IAAIP,GAAG,CAACQ,QAAQ,CAAC,CAAC;IAC/C;IACA,IAAI,OAAOF,OAAO,KAAK,QAAQ,EAAE;MAC/B,IAAI;QACFL,UAAU,GAAGN,IAAI,CAACQ,MAAM,CAACC,UAAU,CAACE,OAAO,CAAC;QAC5C,OAAOL,UAAU;MACnB,CAAC,CAAC,MAAM;QACNR,MAAM,CAACY,EAAE,CAAC,KAAK,CAAC;MAClB;IACF,CAAC,MAAM;MACLJ,UAAU,GAAGQ,MAAM,CAACH,OAAO,CAAC;IAC9B;EACF,CAAC,MAAM;IACLL,UAAU,GAAGQ,MAAM,CAACT,GAAG,CAAC;EAC1B;EAEA,OAAO,IAAIL,IAAI,CAACQ,MAAM,CAACF,UAAU,CAAC;AACpC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}