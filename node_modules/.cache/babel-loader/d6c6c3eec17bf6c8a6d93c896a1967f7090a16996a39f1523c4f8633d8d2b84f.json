{"ast":null,"code":"'use strict';\n\nconst get = require('../get');\nconst mpath = require('mpath');\nconst parseProjection = require('../projection/parseProjection');\n\n/*!\n * ignore\n */\n\nmodule.exports = function removeDeselectedForeignField(foreignFields, options, docs) {\n  const projection = parseProjection(get(options, 'select', null), true) || parseProjection(get(options, 'options.select', null), true);\n  if (projection == null) {\n    return;\n  }\n  for (const foreignField of foreignFields) {\n    if (!Object.hasOwn(projection, '-' + foreignField)) {\n      continue;\n    }\n    for (const val of docs) {\n      if (val.$__ != null) {\n        mpath.unset(foreignField, val._doc);\n      } else {\n        mpath.unset(foreignField, val);\n      }\n    }\n  }\n};","map":{"version":3,"names":["get","require","mpath","parseProjection","module","exports","removeDeselectedForeignField","foreignFields","options","docs","projection","foreignField","Object","hasOwn","val","$__","unset","_doc"],"sources":["C:/DEVC/node_modules/mongoose/lib/helpers/populate/removeDeselectedForeignField.js"],"sourcesContent":["'use strict';\n\nconst get = require('../get');\nconst mpath = require('mpath');\nconst parseProjection = require('../projection/parseProjection');\n\n/*!\n * ignore\n */\n\nmodule.exports = function removeDeselectedForeignField(foreignFields, options, docs) {\n  const projection = parseProjection(get(options, 'select', null), true) ||\n    parseProjection(get(options, 'options.select', null), true);\n\n  if (projection == null) {\n    return;\n  }\n  for (const foreignField of foreignFields) {\n    if (!Object.hasOwn(projection, '-' + foreignField)) {\n      continue;\n    }\n\n    for (const val of docs) {\n      if (val.$__ != null) {\n        mpath.unset(foreignField, val._doc);\n      } else {\n        mpath.unset(foreignField, val);\n      }\n    }\n  }\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,GAAG,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC7B,MAAMC,KAAK,GAAGD,OAAO,CAAC,OAAO,CAAC;AAC9B,MAAME,eAAe,GAAGF,OAAO,CAAC,+BAA+B,CAAC;;AAEhE;AACA;AACA;;AAEAG,MAAM,CAACC,OAAO,GAAG,SAASC,4BAA4BA,CAACC,aAAa,EAAEC,OAAO,EAAEC,IAAI,EAAE;EACnF,MAAMC,UAAU,GAAGP,eAAe,CAACH,GAAG,CAACQ,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,IACpEL,eAAe,CAACH,GAAG,CAACQ,OAAO,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC;EAE7D,IAAIE,UAAU,IAAI,IAAI,EAAE;IACtB;EACF;EACA,KAAK,MAAMC,YAAY,IAAIJ,aAAa,EAAE;IACxC,IAAI,CAACK,MAAM,CAACC,MAAM,CAACH,UAAU,EAAE,GAAG,GAAGC,YAAY,CAAC,EAAE;MAClD;IACF;IAEA,KAAK,MAAMG,GAAG,IAAIL,IAAI,EAAE;MACtB,IAAIK,GAAG,CAACC,GAAG,IAAI,IAAI,EAAE;QACnBb,KAAK,CAACc,KAAK,CAACL,YAAY,EAAEG,GAAG,CAACG,IAAI,CAAC;MACrC,CAAC,MAAM;QACLf,KAAK,CAACc,KAAK,CAACL,YAAY,EAAEG,GAAG,CAAC;MAChC;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}