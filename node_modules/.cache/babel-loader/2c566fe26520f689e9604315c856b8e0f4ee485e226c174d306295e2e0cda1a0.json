{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\nvar checkParameters = require('./precondition');\nvar defaultEncoding = require('./default-encoding');\nvar sync = require('./sync');\nvar toBuffer = require('./to-buffer');\nvar ZERO_BUF;\nvar subtle = global.crypto && global.crypto.subtle;\nvar toBrowser = {\n  sha: 'SHA-1',\n  'sha-1': 'SHA-1',\n  sha1: 'SHA-1',\n  sha256: 'SHA-256',\n  'sha-256': 'SHA-256',\n  sha384: 'SHA-384',\n  'sha-384': 'SHA-384',\n  'sha-512': 'SHA-512',\n  sha512: 'SHA-512'\n};\nvar checks = [];\nvar nextTick;\nfunction getNextTick() {\n  if (nextTick) {\n    return nextTick;\n  }\n  if (global.process && global.process.nextTick) {\n    nextTick = global.process.nextTick;\n  } else if (global.queueMicrotask) {\n    nextTick = global.queueMicrotask;\n  } else if (global.setImmediate) {\n    nextTick = global.setImmediate;\n  } else {\n    nextTick = global.setTimeout;\n  }\n  return nextTick;\n}\nfunction browserPbkdf2(password, salt, iterations, length, algo) {\n  return subtle.importKey('raw', password, {\n    name: 'PBKDF2'\n  }, false, ['deriveBits']).then(function (key) {\n    return subtle.deriveBits({\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: iterations,\n      hash: {\n        name: algo\n      }\n    }, key, length << 3);\n  }).then(function (res) {\n    return Buffer.from(res);\n  });\n}\nfunction checkNative(algo) {\n  if (global.process && !global.process.browser) {\n    return Promise.resolve(false);\n  }\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\n    return Promise.resolve(false);\n  }\n  if (checks[algo] !== undefined) {\n    return checks[algo];\n  }\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8);\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo).then(function () {\n    return true;\n  }, function () {\n    return false;\n  });\n  checks[algo] = prom;\n  return prom;\n}\nfunction resolvePromise(promise, callback) {\n  promise.then(function (out) {\n    getNextTick()(function () {\n      callback(null, out);\n    });\n  }, function (e) {\n    getNextTick()(function () {\n      callback(e);\n    });\n  });\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest;\n    digest = undefined;\n  }\n  checkParameters(iterations, keylen);\n  password = toBuffer(password, defaultEncoding, 'Password');\n  salt = toBuffer(salt, defaultEncoding, 'Salt');\n  if (typeof callback !== 'function') {\n    throw new Error('No callback provided to pbkdf2');\n  }\n  digest = digest || 'sha1';\n  var algo = toBrowser[digest.toLowerCase()];\n  if (!algo || typeof global.Promise !== 'function') {\n    getNextTick()(function () {\n      var out;\n      try {\n        out = sync(password, salt, iterations, keylen, digest);\n      } catch (e) {\n        callback(e);\n        return;\n      }\n      callback(null, out);\n    });\n    return;\n  }\n  resolvePromise(checkNative(algo).then(function (resp) {\n    if (resp) {\n      return browserPbkdf2(password, salt, iterations, keylen, algo);\n    }\n    return sync(password, salt, iterations, keylen, digest);\n  }), callback);\n};","map":{"version":3,"names":["Buffer","require","checkParameters","defaultEncoding","sync","toBuffer","ZERO_BUF","subtle","global","crypto","toBrowser","sha","sha1","sha256","sha384","sha512","checks","nextTick","getNextTick","process","queueMicrotask","setImmediate","setTimeout","browserPbkdf2","password","salt","iterations","length","algo","importKey","name","then","key","deriveBits","hash","res","from","checkNative","browser","Promise","resolve","undefined","alloc","prom","resolvePromise","promise","callback","out","e","module","exports","keylen","digest","Error","toLowerCase","resp"],"sources":["C:/DEVC/node_modules/pbkdf2/lib/async.js"],"sourcesContent":["'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar checkParameters = require('./precondition');\nvar defaultEncoding = require('./default-encoding');\nvar sync = require('./sync');\nvar toBuffer = require('./to-buffer');\n\nvar ZERO_BUF;\nvar subtle = global.crypto && global.crypto.subtle;\nvar toBrowser = {\n\tsha: 'SHA-1',\n\t'sha-1': 'SHA-1',\n\tsha1: 'SHA-1',\n\tsha256: 'SHA-256',\n\t'sha-256': 'SHA-256',\n\tsha384: 'SHA-384',\n\t'sha-384': 'SHA-384',\n\t'sha-512': 'SHA-512',\n\tsha512: 'SHA-512'\n};\nvar checks = [];\nvar nextTick;\nfunction getNextTick() {\n\tif (nextTick) {\n\t\treturn nextTick;\n\t}\n\tif (global.process && global.process.nextTick) {\n\t\tnextTick = global.process.nextTick;\n\t} else if (global.queueMicrotask) {\n\t\tnextTick = global.queueMicrotask;\n\t} else if (global.setImmediate) {\n\t\tnextTick = global.setImmediate;\n\t} else {\n\t\tnextTick = global.setTimeout;\n\t}\n\treturn nextTick;\n}\nfunction browserPbkdf2(password, salt, iterations, length, algo) {\n\treturn subtle.importKey('raw', password, { name: 'PBKDF2' }, false, ['deriveBits']).then(function (key) {\n\t\treturn subtle.deriveBits({\n\t\t\tname: 'PBKDF2',\n\t\t\tsalt: salt,\n\t\t\titerations: iterations,\n\t\t\thash: {\n\t\t\t\tname: algo\n\t\t\t}\n\t\t}, key, length << 3);\n\t}).then(function (res) {\n\t\treturn Buffer.from(res);\n\t});\n}\nfunction checkNative(algo) {\n\tif (global.process && !global.process.browser) {\n\t\treturn Promise.resolve(false);\n\t}\n\tif (!subtle || !subtle.importKey || !subtle.deriveBits) {\n\t\treturn Promise.resolve(false);\n\t}\n\tif (checks[algo] !== undefined) {\n\t\treturn checks[algo];\n\t}\n\tZERO_BUF = ZERO_BUF || Buffer.alloc(8);\n\tvar prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo)\n\t\t.then(\n\t\t\tfunction () { return true; },\n\t\t\tfunction () { return false; }\n\t\t);\n\tchecks[algo] = prom;\n\treturn prom;\n}\n\nfunction resolvePromise(promise, callback) {\n\tpromise.then(function (out) {\n\t\tgetNextTick()(function () {\n\t\t\tcallback(null, out);\n\t\t});\n\t}, function (e) {\n\t\tgetNextTick()(function () {\n\t\t\tcallback(e);\n\t\t});\n\t});\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n\tif (typeof digest === 'function') {\n\t\tcallback = digest;\n\t\tdigest = undefined;\n\t}\n\n\tcheckParameters(iterations, keylen);\n\tpassword = toBuffer(password, defaultEncoding, 'Password');\n\tsalt = toBuffer(salt, defaultEncoding, 'Salt');\n\tif (typeof callback !== 'function') {\n\t\tthrow new Error('No callback provided to pbkdf2');\n\t}\n\n\tdigest = digest || 'sha1';\n\tvar algo = toBrowser[digest.toLowerCase()];\n\n\tif (!algo || typeof global.Promise !== 'function') {\n\t\tgetNextTick()(function () {\n\t\t\tvar out;\n\t\t\ttry {\n\t\t\t\tout = sync(password, salt, iterations, keylen, digest);\n\t\t\t} catch (e) {\n\t\t\t\tcallback(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcallback(null, out);\n\t\t});\n\t\treturn;\n\t}\n\n\tresolvePromise(checkNative(algo).then(function (resp) {\n\t\tif (resp) {\n\t\t\treturn browserPbkdf2(password, salt, iterations, keylen, algo);\n\t\t}\n\n\t\treturn sync(password, salt, iterations, keylen, digest);\n\t}), callback);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}