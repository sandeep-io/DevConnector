{"ast":null,"code":"'use strict';\n\n/*!\n * Module dependencies.\n */\nconst ArrayMethods = require('../array/methods');\nconst DocumentArrayMethods = require('./methods');\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\n/**\n * DocumentArray constructor\n *\n * @param {Array} values\n * @param {String} path the path to this array\n * @param {Document} doc parent document\n * @api private\n * @return {MongooseDocumentArray}\n * @inherits MongooseArray\n * @see https://bit.ly/f6CnZU\n */\n\nfunction MongooseDocumentArray(values, path, doc, schematype) {\n  const __array = [];\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: void 0,\n    [arrayParentSymbol]: void 0\n  };\n  if (Array.isArray(values)) {\n    if (values[arrayPathSymbol] === path && values[arrayParentSymbol] === doc) {\n      internals[arrayAtomicsSymbol] = Object.assign({}, values[arrayAtomicsSymbol]);\n    }\n    values.forEach(v => {\n      _basePush.call(__array, v);\n    });\n  }\n  internals[arrayPathSymbol] = path;\n  internals.__array = __array;\n  if (doc?.$__) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = doc.$__schema.path(path);\n\n    // `schema.path()` doesn't drill into nested arrays properly yet, see\n    // gh-6398, gh-6602. This is a workaround because nested arrays are\n    // always plain non-document arrays, so once you get to a document array\n    // nesting is done. Matryoshka code.\n    while (internals[arraySchemaSymbol] != null && internals[arraySchemaSymbol].$isMongooseArray && !internals[arraySchemaSymbol].$isMongooseDocumentArray) {\n      internals[arraySchemaSymbol] = internals[arraySchemaSymbol].embeddedSchemaType;\n    }\n  }\n  const proxy = new Proxy(__array, {\n    get: function (target, prop) {\n      if (prop === 'isMongooseArray' || prop === 'isMongooseArrayProxy' || prop === 'isMongooseDocumentArray' || prop === 'isMongooseDocumentArrayProxy') {\n        return true;\n      }\n      if (Object.hasOwn(internals, prop)) {\n        return internals[prop];\n      }\n      if (Object.hasOwn(DocumentArrayMethods, prop)) {\n        return DocumentArrayMethods[prop];\n      }\n      if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        return schematype.virtuals[prop].applyGetters(undefined, target);\n      }\n      if (Object.hasOwn(ArrayMethods, prop)) {\n        return ArrayMethods[prop];\n      }\n      return __array[prop];\n    },\n    set: function (target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        DocumentArrayMethods.set.call(proxy, prop, value, false);\n      } else if (Object.hasOwn(internals, prop)) {\n        internals[prop] = value;\n      } else if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        schematype.virtuals[prop].applySetters(value, target);\n      } else {\n        __array[prop] = value;\n      }\n      return true;\n    }\n  });\n  return proxy;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = MongooseDocumentArray;","map":{"version":3,"names":["ArrayMethods","require","DocumentArrayMethods","arrayAtomicsSymbol","arrayAtomicsBackupSymbol","arrayParentSymbol","arrayPathSymbol","arraySchemaSymbol","_basePush","Array","prototype","push","numberRE","MongooseDocumentArray","values","path","doc","schematype","__array","internals","isArray","Object","assign","forEach","v","call","$__","$__schema","$isMongooseArray","$isMongooseDocumentArray","embeddedSchemaType","proxy","Proxy","get","target","prop","hasOwn","virtuals","applyGetters","undefined","set","value","test","applySetters","module","exports"],"sources":["C:/DEVC/node_modules/mongoose/lib/types/documentArray/index.js"],"sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst ArrayMethods = require('../array/methods');\nconst DocumentArrayMethods = require('./methods');\n\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\n\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\n/**\n * DocumentArray constructor\n *\n * @param {Array} values\n * @param {String} path the path to this array\n * @param {Document} doc parent document\n * @api private\n * @return {MongooseDocumentArray}\n * @inherits MongooseArray\n * @see https://bit.ly/f6CnZU\n */\n\nfunction MongooseDocumentArray(values, path, doc, schematype) {\n  const __array = [];\n\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: void 0,\n    [arrayParentSymbol]: void 0\n  };\n\n  if (Array.isArray(values)) {\n    if (values[arrayPathSymbol] === path &&\n        values[arrayParentSymbol] === doc) {\n      internals[arrayAtomicsSymbol] = Object.assign({}, values[arrayAtomicsSymbol]);\n    }\n    values.forEach(v => {\n      _basePush.call(__array, v);\n    });\n  }\n  internals[arrayPathSymbol] = path;\n  internals.__array = __array;\n\n  if (doc?.$__) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = doc.$__schema.path(path);\n\n    // `schema.path()` doesn't drill into nested arrays properly yet, see\n    // gh-6398, gh-6602. This is a workaround because nested arrays are\n    // always plain non-document arrays, so once you get to a document array\n    // nesting is done. Matryoshka code.\n    while (internals[arraySchemaSymbol] != null &&\n        internals[arraySchemaSymbol].$isMongooseArray &&\n        !internals[arraySchemaSymbol].$isMongooseDocumentArray) {\n      internals[arraySchemaSymbol] = internals[arraySchemaSymbol].embeddedSchemaType;\n    }\n  }\n\n  const proxy = new Proxy(__array, {\n    get: function(target, prop) {\n      if (prop === 'isMongooseArray' ||\n          prop === 'isMongooseArrayProxy' ||\n          prop === 'isMongooseDocumentArray' ||\n          prop === 'isMongooseDocumentArrayProxy') {\n        return true;\n      }\n      if (Object.hasOwn(internals, prop)) {\n        return internals[prop];\n      }\n      if (Object.hasOwn(DocumentArrayMethods, prop)) {\n        return DocumentArrayMethods[prop];\n      }\n      if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        return schematype.virtuals[prop].applyGetters(undefined, target);\n      }\n      if (Object.hasOwn(ArrayMethods, prop)) {\n        return ArrayMethods[prop];\n      }\n\n      return __array[prop];\n    },\n    set: function(target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        DocumentArrayMethods.set.call(proxy, prop, value, false);\n      } else if (Object.hasOwn(internals, prop)) {\n        internals[prop] = value;\n      } else if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        schematype.virtuals[prop].applySetters(value, target);\n      } else {\n        __array[prop] = value;\n      }\n\n      return true;\n    }\n  });\n\n  return proxy;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = MongooseDocumentArray;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}