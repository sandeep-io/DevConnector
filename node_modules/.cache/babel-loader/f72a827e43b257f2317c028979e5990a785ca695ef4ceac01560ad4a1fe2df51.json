{"ast":null,"code":"'use strict';\n\nmodule.exports = parallelLimit;\n\n/*!\n * ignore\n */\n\nasync function parallelLimit(params, fn, limit) {\n  if (limit <= 0) {\n    throw new Error('Limit must be positive');\n  }\n  if (params.length === 0) {\n    return [];\n  }\n  const results = [];\n  const executing = new Set();\n  for (let index = 0; index < params.length; index++) {\n    const param = params[index];\n    const p = fn(param, index);\n    results.push(p);\n    executing.add(p);\n    const clean = () => executing.delete(p);\n    p.then(clean).catch(clean);\n    if (executing.size >= limit) {\n      await Promise.race(executing);\n    }\n  }\n  return Promise.all(results);\n}","map":{"version":3,"names":["module","exports","parallelLimit","params","fn","limit","Error","length","results","executing","Set","index","param","p","push","add","clean","delete","then","catch","size","Promise","race","all"],"sources":["C:/DEVC/node_modules/mongoose/lib/helpers/parallelLimit.js"],"sourcesContent":["'use strict';\n\nmodule.exports = parallelLimit;\n\n/*!\n * ignore\n */\n\nasync function parallelLimit(params, fn, limit) {\n  if (limit <= 0) {\n    throw new Error('Limit must be positive');\n  }\n\n  if (params.length === 0) {\n    return [];\n  }\n\n  const results = [];\n  const executing = new Set();\n\n  for (let index = 0; index < params.length; index++) {\n    const param = params[index];\n    const p = fn(param, index);\n    results.push(p);\n\n    executing.add(p);\n\n    const clean = () => executing.delete(p);\n    p.then(clean).catch(clean);\n\n    if (executing.size >= limit) {\n      await Promise.race(executing);\n    }\n  }\n\n  return Promise.all(results);\n}\n"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,OAAO,GAAGC,aAAa;;AAE9B;AACA;AACA;;AAEA,eAAeA,aAAaA,CAACC,MAAM,EAAEC,EAAE,EAAEC,KAAK,EAAE;EAC9C,IAAIA,KAAK,IAAI,CAAC,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;EAC3C;EAEA,IAAIH,MAAM,CAACI,MAAM,KAAK,CAAC,EAAE;IACvB,OAAO,EAAE;EACX;EAEA,MAAMC,OAAO,GAAG,EAAE;EAClB,MAAMC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;EAE3B,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGR,MAAM,CAACI,MAAM,EAAEI,KAAK,EAAE,EAAE;IAClD,MAAMC,KAAK,GAAGT,MAAM,CAACQ,KAAK,CAAC;IAC3B,MAAME,CAAC,GAAGT,EAAE,CAACQ,KAAK,EAAED,KAAK,CAAC;IAC1BH,OAAO,CAACM,IAAI,CAACD,CAAC,CAAC;IAEfJ,SAAS,CAACM,GAAG,CAACF,CAAC,CAAC;IAEhB,MAAMG,KAAK,GAAGA,CAAA,KAAMP,SAAS,CAACQ,MAAM,CAACJ,CAAC,CAAC;IACvCA,CAAC,CAACK,IAAI,CAACF,KAAK,CAAC,CAACG,KAAK,CAACH,KAAK,CAAC;IAE1B,IAAIP,SAAS,CAACW,IAAI,IAAIf,KAAK,EAAE;MAC3B,MAAMgB,OAAO,CAACC,IAAI,CAACb,SAAS,CAAC;IAC/B;EACF;EAEA,OAAOY,OAAO,CAACE,GAAG,CAACf,OAAO,CAAC;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}