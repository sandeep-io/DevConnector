{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EndSessionsOperation = void 0;\nconst responses_1 = require(\"../cmap/wire_protocol/responses\");\nconst command_1 = require(\"../operations/command\");\nconst read_preference_1 = require(\"../read_preference\");\nconst utils_1 = require(\"../utils\");\nconst operation_1 = require(\"./operation\");\nclass EndSessionsOperation extends command_1.CommandOperation {\n  constructor(sessions) {\n    super();\n    this.writeConcern = {\n      w: 0\n    };\n    this.ns = utils_1.MongoDBNamespace.fromString('admin.$cmd');\n    this.SERVER_COMMAND_RESPONSE_TYPE = responses_1.MongoDBResponse;\n    this.sessions = sessions;\n  }\n  buildCommandDocument(_connection, _session) {\n    return {\n      endSessions: this.sessions\n    };\n  }\n  buildOptions(timeoutContext) {\n    return {\n      timeoutContext,\n      readPreference: read_preference_1.ReadPreference.primaryPreferred\n    };\n  }\n  get commandName() {\n    return 'endSessions';\n  }\n}\nexports.EndSessionsOperation = EndSessionsOperation;\n(0, operation_1.defineAspects)(EndSessionsOperation, operation_1.Aspect.WRITE_OPERATION);","map":{"version":3,"names":["responses_1","require","command_1","read_preference_1","utils_1","operation_1","EndSessionsOperation","CommandOperation","constructor","sessions","writeConcern","w","ns","MongoDBNamespace","fromString","SERVER_COMMAND_RESPONSE_TYPE","MongoDBResponse","buildCommandDocument","_connection","_session","endSessions","buildOptions","timeoutContext","readPreference","ReadPreference","primaryPreferred","commandName","exports","defineAspects","Aspect","WRITE_OPERATION"],"sources":["C:\\DEVC\\node_modules\\mongodb\\src\\operations\\end_sessions.ts"],"sourcesContent":["import {\n  type ClientSession,\n  type Connection,\n  type ServerCommandOptions,\n  type ServerSessionId,\n  type TimeoutContext,\n  type WriteConcern\n} from '..';\nimport { type Document } from '../bson';\nimport { MongoDBResponse } from '../cmap/wire_protocol/responses';\nimport { CommandOperation } from '../operations/command';\nimport { ReadPreference } from '../read_preference';\nimport { MongoDBNamespace } from '../utils';\nimport { Aspect, defineAspects } from './operation';\n\nexport class EndSessionsOperation extends CommandOperation<void> {\n  override writeConcern: WriteConcern = { w: 0 };\n  override ns = MongoDBNamespace.fromString('admin.$cmd');\n  override SERVER_COMMAND_RESPONSE_TYPE = MongoDBResponse;\n\n  private sessions: Array<ServerSessionId>;\n\n  constructor(sessions: Array<ServerSessionId>) {\n    super();\n    this.sessions = sessions;\n  }\n\n  override buildCommandDocument(_connection: Connection, _session?: ClientSession): Document {\n    return {\n      endSessions: this.sessions\n    };\n  }\n  override buildOptions(timeoutContext: TimeoutContext): ServerCommandOptions {\n    return {\n      timeoutContext,\n      readPreference: ReadPreference.primaryPreferred\n    };\n  }\n  override get commandName(): string {\n    return 'endSessions';\n  }\n}\n\ndefineAspects(EndSessionsOperation, Aspect.WRITE_OPERATION);\n"],"mappings":";;;;;;AASA,MAAAA,WAAA,GAAAC,OAAA;AACA,MAAAC,SAAA,GAAAD,OAAA;AACA,MAAAE,iBAAA,GAAAF,OAAA;AACA,MAAAG,OAAA,GAAAH,OAAA;AACA,MAAAI,WAAA,GAAAJ,OAAA;AAEA,MAAaK,oBAAqB,SAAQJ,SAAA,CAAAK,gBAAsB;EAO9DC,YAAYC,QAAgC;IAC1C,KAAK,EAAE;IAPA,KAAAC,YAAY,GAAiB;MAAEC,CAAC,EAAE;IAAC,CAAE;IACrC,KAAAC,EAAE,GAAGR,OAAA,CAAAS,gBAAgB,CAACC,UAAU,CAAC,YAAY,CAAC;IAC9C,KAAAC,4BAA4B,GAAGf,WAAA,CAAAgB,eAAe;IAMrD,IAAI,CAACP,QAAQ,GAAGA,QAAQ;EAC1B;EAESQ,oBAAoBA,CAACC,WAAuB,EAAEC,QAAwB;IAC7E,OAAO;MACLC,WAAW,EAAE,IAAI,CAACX;KACnB;EACH;EACSY,YAAYA,CAACC,cAA8B;IAClD,OAAO;MACLA,cAAc;MACdC,cAAc,EAAEpB,iBAAA,CAAAqB,cAAc,CAACC;KAChC;EACH;EACA,IAAaC,WAAWA,CAAA;IACtB,OAAO,aAAa;EACtB;;AAzBFC,OAAA,CAAArB,oBAAA,GAAAA,oBAAA;AA4BA,IAAAD,WAAA,CAAAuB,aAAa,EAACtB,oBAAoB,EAAED,WAAA,CAAAwB,MAAM,CAACC,eAAe,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}