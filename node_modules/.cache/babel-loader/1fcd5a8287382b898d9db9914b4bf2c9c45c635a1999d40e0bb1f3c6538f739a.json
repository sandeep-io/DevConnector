{"ast":null,"code":"'use strict';\n\n/**\n * Decorate the update with a version key, if necessary\n * @api private\n */\nmodule.exports = function decorateUpdateWithVersionKey(update, options, versionKey) {\n  if (!versionKey || !options?.upsert) {\n    return;\n  }\n  if (options.overwrite) {\n    if (!hasKey(update, versionKey)) {\n      update[versionKey] = 0;\n    }\n  } else if (!hasKey(update, versionKey) && !hasKey(update?.$set, versionKey) && !hasKey(update?.$inc, versionKey) && !hasKey(update?.$setOnInsert, versionKey)) {\n    if (!update.$setOnInsert) {\n      update.$setOnInsert = {};\n    }\n    update.$setOnInsert[versionKey] = 0;\n  }\n};\nfunction hasKey(obj, key) {\n  if (obj == null || typeof obj !== 'object') {\n    return false;\n  }\n  return Object.hasOwn(obj, key);\n}","map":{"version":3,"names":["module","exports","decorateUpdateWithVersionKey","update","options","versionKey","upsert","overwrite","hasKey","$set","$inc","$setOnInsert","obj","key","Object","hasOwn"],"sources":["C:/DEVC/node_modules/mongoose/lib/helpers/update/decorateUpdateWithVersionKey.js"],"sourcesContent":["'use strict';\n\n/**\n * Decorate the update with a version key, if necessary\n * @api private\n */\n\nmodule.exports = function decorateUpdateWithVersionKey(update, options, versionKey) {\n  if (!versionKey || !options?.upsert) {\n    return;\n  }\n\n  if (options.overwrite) {\n    if (!hasKey(update, versionKey)) {\n      update[versionKey] = 0;\n    }\n  } else if (\n    !hasKey(update, versionKey) &&\n    !hasKey(update?.$set, versionKey) &&\n    !hasKey(update?.$inc, versionKey) &&\n    !hasKey(update?.$setOnInsert, versionKey)\n  ) {\n    if (!update.$setOnInsert) {\n      update.$setOnInsert = {};\n    }\n    update.$setOnInsert[versionKey] = 0;\n  }\n};\n\nfunction hasKey(obj, key) {\n  if (obj == null || typeof obj !== 'object') {\n    return false;\n  }\n  return Object.hasOwn(obj, key);\n}\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA;AACA;AACA;AAEAA,MAAM,CAACC,OAAO,GAAG,SAASC,4BAA4BA,CAACC,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAE;EAClF,IAAI,CAACA,UAAU,IAAI,CAACD,OAAO,EAAEE,MAAM,EAAE;IACnC;EACF;EAEA,IAAIF,OAAO,CAACG,SAAS,EAAE;IACrB,IAAI,CAACC,MAAM,CAACL,MAAM,EAAEE,UAAU,CAAC,EAAE;MAC/BF,MAAM,CAACE,UAAU,CAAC,GAAG,CAAC;IACxB;EACF,CAAC,MAAM,IACL,CAACG,MAAM,CAACL,MAAM,EAAEE,UAAU,CAAC,IAC3B,CAACG,MAAM,CAACL,MAAM,EAAEM,IAAI,EAAEJ,UAAU,CAAC,IACjC,CAACG,MAAM,CAACL,MAAM,EAAEO,IAAI,EAAEL,UAAU,CAAC,IACjC,CAACG,MAAM,CAACL,MAAM,EAAEQ,YAAY,EAAEN,UAAU,CAAC,EACzC;IACA,IAAI,CAACF,MAAM,CAACQ,YAAY,EAAE;MACxBR,MAAM,CAACQ,YAAY,GAAG,CAAC,CAAC;IAC1B;IACAR,MAAM,CAACQ,YAAY,CAACN,UAAU,CAAC,GAAG,CAAC;EACrC;AACF,CAAC;AAED,SAASG,MAAMA,CAACI,GAAG,EAAEC,GAAG,EAAE;EACxB,IAAID,GAAG,IAAI,IAAI,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;IAC1C,OAAO,KAAK;EACd;EACA,OAAOE,MAAM,CAACC,MAAM,CAACH,GAAG,EAAEC,GAAG,CAAC;AAChC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}