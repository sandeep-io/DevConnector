{"ast":null,"code":"/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst mongooseArrayMethods = require('./methods');\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\n\n/**\n * Mongoose Array constructor.\n *\n * #### Note:\n *\n * _Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._\n *\n * @param {Array} values\n * @param {String} path\n * @param {Document} doc parent document\n * @api private\n * @inherits Array https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\n * @see https://bit.ly/f6CnZU\n */\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\nfunction MongooseArray(values, path, doc, schematype) {\n  let __array;\n  if (Array.isArray(values)) {\n    const len = values.length;\n\n    // Perf optimizations for small arrays: much faster to use `...` than `for` + `push`,\n    // but large arrays may cause stack overflows. And for arrays of length 0/1, just\n    // modifying the array is faster. Seems small, but adds up when you have a document\n    // with thousands of nested arrays.\n    if (len === 0) {\n      __array = new Array();\n    } else if (len === 1) {\n      __array = new Array(1);\n      __array[0] = values[0];\n    } else if (len < 10000) {\n      __array = new Array();\n      _basePush.apply(__array, values);\n    } else {\n      __array = new Array();\n      for (let i = 0; i < len; ++i) {\n        _basePush.call(__array, values[i]);\n      }\n    }\n  } else {\n    __array = [];\n  }\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: schematype,\n    [arrayParentSymbol]: void 0,\n    isMongooseArray: true,\n    isMongooseArrayProxy: true,\n    __array: __array\n  };\n  if (values && values[arrayAtomicsSymbol] != null) {\n    internals[arrayAtomicsSymbol] = values[arrayAtomicsSymbol];\n  }\n  if (doc?.$__) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = schematype || doc.schema.path(path);\n  }\n  const proxy = new Proxy(__array, {\n    get: function (target, prop) {\n      if (Object.hasOwn(internals, prop)) {\n        return internals[prop];\n      }\n      if (Object.hasOwn(mongooseArrayMethods, prop)) {\n        return mongooseArrayMethods[prop];\n      }\n      if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        return schematype.virtuals[prop].applyGetters(undefined, target);\n      }\n      if (typeof prop === 'string' && numberRE.test(prop) && schematype?.embeddedSchemaType != null) {\n        return schematype.embeddedSchemaType.applyGetters(__array[prop], doc);\n      }\n      return __array[prop];\n    },\n    set: function (target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        mongooseArrayMethods.set.call(proxy, prop, value, false);\n      } else if (Object.hasOwn(internals, prop)) {\n        internals[prop] = value;\n      } else if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        schematype.virtuals[prop].applySetters(value, target);\n      } else {\n        __array[prop] = value;\n      }\n      return true;\n    }\n  });\n  return proxy;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = exports = MongooseArray;","map":{"version":3,"names":["mongooseArrayMethods","require","arrayAtomicsSymbol","arrayAtomicsBackupSymbol","arrayParentSymbol","arrayPathSymbol","arraySchemaSymbol","_basePush","Array","prototype","push","numberRE","MongooseArray","values","path","doc","schematype","__array","isArray","len","length","apply","i","call","internals","isMongooseArray","isMongooseArrayProxy","$__","schema","proxy","Proxy","get","target","prop","Object","hasOwn","virtuals","applyGetters","undefined","test","embeddedSchemaType","set","value","applySetters","module","exports"],"sources":["C:/DEVC/node_modules/mongoose/lib/types/array/index.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst mongooseArrayMethods = require('./methods');\n\nconst arrayAtomicsSymbol = require('../../helpers/symbols').arrayAtomicsSymbol;\nconst arrayAtomicsBackupSymbol = require('../../helpers/symbols').arrayAtomicsBackupSymbol;\nconst arrayParentSymbol = require('../../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../../helpers/symbols').arraySchemaSymbol;\n\n/**\n * Mongoose Array constructor.\n *\n * #### Note:\n *\n * _Values always have to be passed to the constructor to initialize, otherwise `MongooseArray#push` will mark the array as modified._\n *\n * @param {Array} values\n * @param {String} path\n * @param {Document} doc parent document\n * @api private\n * @inherits Array https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\n * @see https://bit.ly/f6CnZU\n */\nconst _basePush = Array.prototype.push;\nconst numberRE = /^\\d+$/;\n\nfunction MongooseArray(values, path, doc, schematype) {\n  let __array;\n\n  if (Array.isArray(values)) {\n    const len = values.length;\n\n    // Perf optimizations for small arrays: much faster to use `...` than `for` + `push`,\n    // but large arrays may cause stack overflows. And for arrays of length 0/1, just\n    // modifying the array is faster. Seems small, but adds up when you have a document\n    // with thousands of nested arrays.\n    if (len === 0) {\n      __array = new Array();\n    } else if (len === 1) {\n      __array = new Array(1);\n      __array[0] = values[0];\n    } else if (len < 10000) {\n      __array = new Array();\n      _basePush.apply(__array, values);\n    } else {\n      __array = new Array();\n      for (let i = 0; i < len; ++i) {\n        _basePush.call(__array, values[i]);\n      }\n    }\n  } else {\n    __array = [];\n  }\n\n  const internals = {\n    [arrayAtomicsSymbol]: {},\n    [arrayAtomicsBackupSymbol]: void 0,\n    [arrayPathSymbol]: path,\n    [arraySchemaSymbol]: schematype,\n    [arrayParentSymbol]: void 0,\n    isMongooseArray: true,\n    isMongooseArrayProxy: true,\n    __array: __array\n  };\n\n  if (values && values[arrayAtomicsSymbol] != null) {\n    internals[arrayAtomicsSymbol] = values[arrayAtomicsSymbol];\n  }\n\n  if (doc?.$__) {\n    internals[arrayParentSymbol] = doc;\n    internals[arraySchemaSymbol] = schematype || doc.schema.path(path);\n  }\n\n  const proxy = new Proxy(__array, {\n    get: function(target, prop) {\n      if (Object.hasOwn(internals, prop)) {\n        return internals[prop];\n      }\n      if (Object.hasOwn(mongooseArrayMethods, prop)) {\n        return mongooseArrayMethods[prop];\n      }\n      if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        return schematype.virtuals[prop].applyGetters(undefined, target);\n      }\n      if (typeof prop === 'string' && numberRE.test(prop) && schematype?.embeddedSchemaType != null) {\n        return schematype.embeddedSchemaType.applyGetters(__array[prop], doc);\n      }\n\n      return __array[prop];\n    },\n    set: function(target, prop, value) {\n      if (typeof prop === 'string' && numberRE.test(prop)) {\n        mongooseArrayMethods.set.call(proxy, prop, value, false);\n      } else if (Object.hasOwn(internals, prop)) {\n        internals[prop] = value;\n      } else if (schematype?.virtuals && Object.hasOwn(schematype.virtuals, prop)) {\n        schematype.virtuals[prop].applySetters(value, target);\n      } else {\n        __array[prop] = value;\n      }\n\n      return true;\n    }\n  });\n\n  return proxy;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = exports = MongooseArray;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}